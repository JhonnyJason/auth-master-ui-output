<!doctype html><html lang="en"><head><meta charset="utf-8"><title>Auth Master UI</title><meta name="description" content="The Auth Master PWA - use your Master Key to manage the authorized clients on your servers!"><meta property="og:image" content="https://auth-master.dotv.ee/android-chrome-192x192.png"><meta property="og:title" content="Auth Master"><meta property="og:description" content="The Auth Master PWA - use your Master Key to manage the authorized clients on your servers!"><meta property="og:type" content="website"><meta property="og:url" content="https://auth-master.dotv.ee"><meta property="og:locale" content="en_US"><link rel="manifest" href="manifest.json"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" content="#ABA7AA"><meta name="viewport" content="width=device-width,initial-scale=1"><style>a,abbr,acronym,address,article,aside,b,big,blockquote,body,caption,cite,code,dd,del,dfn,div,dl,dt,em,fieldset,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,html,i,iframe,img,ins,kbd,label,legend,li,nav,object,ol,p,pre,q,samp,section,small,span,strike,strong,sub,sup,table,tbody,td,tfoot,th,thead,tr,tt,ul,var{margin:0;padding:0;border:0;outline:0;font-size:100%;font:inherit;vertical-align:baseline}body{line-height:1;background-color:#000;color:#fff;font-family:Arial,Helvetica,sans-serif;text-align:center;font-size:12pt;height:100%;width:100%;overflow:hidden;background-image:url(/img/jj-ying-7JX0-bfiuxQ-unsplash.webp);background-size:cover;background-position:center;background-repeat:no-repeat}ol,ul{list-style:circle}blockquote,q{quotes:none}blockquote:after,blockquote:before,q:after,q:before{content:'';content:none}a:hover,ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}a{transition:.2s ease-in-out;color:inherit;text-decoration:none}ul{margin:0 0 0 25px}b,strong{font-weight:700}i{font-style:italic}button,input,input:focus,input[type=checkcbox]:focus,select,select:focus,textarea,textarea:focus{border:0;padding:7px;outline:0;line-height:normal;overflow:hidden}button:hover,input[type=submit]:hover{border:0;padding:0;outline:0;line-height:normal;overflow:hidden}html{height:100%}h1{font-size:17pt}h2{font-size:15pt}p{font-size:13pt}.hidden-templates{display:none}#setmasterkeyframe,.invisible-fullframe{position:absolute;top:0;left:0;width:100%;height:100%;box-sizing:border-box;z-index:0;opacity:0;transition:opacity .3s;pointer-events:none}.happy-smiley{margin:auto;height:70px;width:70px;color:#fc4;opacity:.2}.happy-smiley svg{height:inherit;width:inherit}.server-name{font-size:20pt;vertical-align:middle;min-height:40px}.server-url{margin-bottom:10px;overflow:hidden;text-overflow:ellipsis;vertical-align:middle;min-height:20px}.server-id{font-size:9pt;overflow:hidden;text-overflow:ellipsis;vertical-align:middle}#alias{width:100%;min-height:20px;background-color:rgba(0,0,0,.2)}.click-button{cursor:pointer;position:relative;display:inline-block;overflow:hidden;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.click-button::after{content:"";width:100%;height:100%;position:absolute;top:0;left:0;border-radius:12px;display:inline-block;transform:scaleX(1.2) scaleY(1.2);opacity:0;transition:opacity .3s,transform .3s;background:#fff;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.click-button:active::after{transform:scaleX(0) scaleY(0);opacity:.8;transition:opacity,transform}.click-button:disabled{color:#888;background-color:#eee;filter:grayscale(100%)}.click-button:disabled::after{display:none}.manage-clients #clientmanager{z-index:20;opacity:1;pointer-events:all}.manage-clients #start-add-button{opacity:1;pointer-events:all}.manage-clients #clientmanager.add-client #start-add-button{opacity:0;pointer-events:none}.manage-clients #clientmanager.add-client #stop-add-button{opacity:1;pointer-events:all}#clientmanager{position:absolute;top:0;left:0;width:100%;height:100%;box-sizing:border-box;padding:30px;transition:opacity .3s;background-color:rgba(0,0,0,.8);z-index:0;opacity:0;pointer-events:none;display:flex;flex-direction:column}#clientmanager h1{font-size:24pt;line-height:120%;text-align:right;background-color:rgba(0,34,68,.8);padding:20px;margin:-30px -30px 0}#clientmanager label{font-size:12pt;display:block;text-align:left;margin-bottom:5px;margin-top:20px}#clientmanager input{display:block;font-size:16pt;padding:12px;box-sizing:border-box;text-align:center;width:100%;background:rgba(0,34,68,.5);color:#fff;border-bottom:2px solid #004085}#clientmanager input.okay{border-bottom:2px solid #0d8500}#clientmanager input.error{border-bottom:2px solid #850000}#clientmanager input.typing{border-bottom:2px solid #854d00}#clientmanager .passive{opacity:.2;pointer-events:none}#add-client-button{margin-top:30px;border-radius:20px;background-color:#024;padding:20px;box-sizing:border-box;width:100%}#add-client-button svg{height:23px;width:23px;padding-right:5px}#managed-server-info{background-color:rgba(0,34,68,.8);text-align:left;padding:20px;margin-top:20px;border-radius:3px}#server-error-message{display:none;color:red}.error #managed-server-info{background-color:rgba(51,0,0,.8)}.error #server-error-message{display:block}.error #clients-to-serve-list,.error #no-clients-message{display:none}#start-add-button,#stop-add-button{display:block;position:absolute;bottom:10px;right:20px;transition:opacity .3s;border-radius:50%;height:60px;width:60px;z-index:0;opacity:0;pointer-events:none}#start-add-button svg,#stop-add-button svg{height:inherit;width:inherit}#start-add-button{color:rgba(0,34,68,.8);background-color:#fff}#stop-add-button{color:#fff;background-color:#600}#add-client-frame{opacity:0;pointer-events:none;transition:opacity .3s}.add-client #add-client-frame{opacity:1;pointer-events:all}.add-client #clients-to-serve-list{display:none}#clients-to-serve-list{display:block;width:100%}#clients-to-serve-list .client-entry{text-align:left;background-color:#fff;color:#024;border-radius:12px;margin-bottom:20px;width:100%;box-sizing:border-box;padding:10px}#clients-to-serve-list .client-entry-left{display:inline-block;width:calc(100% - 60px)}#clients-to-serve-list .client-entry-right{display:inline-block}#clients-to-serve-list .delete-button{margin-top:7px;display:block;border-radius:9px;background-color:rgba(51,0,0,.8);color:#fff;padding:12px;height:fit-content}#clients-to-serve-list .delete-button svg{height:23px;width:23px}#display-clients-container{margin-top:30px;padding-bottom:100px;overflow:hidden;overflow-y:auto;width:100%}#content{position:relative;width:100%;height:100%}#overlay-frame{position:absolute;width:100%;height:100%;top:0;left:0}#main-frame{position:absolute;display:flex;width:100%;height:100%;top:0;left:0}.set-master-key #setmasterkeyframe{z-index:20;opacity:1;pointer-events:all}#setmasterkeyframe{padding:30px;background-color:rgba(0,0,0,.8);display:flex;flex-direction:column;justify-content:space-between}#setmasterkeyframe h1{font-size:24pt;line-height:120%;text-align:right;background-color:rgba(0,34,68,.8);padding:20px;margin:-30px -30px 0}#setmasterkeyframe label{font-size:12pt;display:block;text-align:left;margin-bottom:5px}#setmasterkeyframe input{display:block;font-size:16pt;padding:12px;box-sizing:border-box;text-align:center;width:100%;background:rgba(0,34,68,.5);color:#fff;border-bottom:2px solid #004085}#setmasterkeyframe input.okay{border-bottom:2px solid #0d8500}#setmasterkeyframe input.error{border-bottom:2px solid #850000}#setmasterkeyframe input.typing{border-bottom:2px solid #853300}#setmasterkeyframe .passive{opacity:.2;pointer-events:none}#key-id-display{font-size:10pt;padding:20px 12px;overflow:hidden;text-overflow:ellipsis;background-color:#000}#storage-id-display{font-size:7pt;text-align:right;overflow:hidden;text-overflow:ellipsis;padding:3px;margin:0 0 20px}#accept-use-button{margin-top:50px;margin-bottom:20px;width:200px;font-size:20pt;padding:12px;box-sizing:border-box;position:relative;cursor:pointer;background-color:rgba(0,34,68,.8);border-radius:15px}#accept-use-button svg{position:absolute;top:0;right:20px;width:40px;height:40px}.display-servers #masterkeydisplay{z-index:22;opacity:1;pointer-events:all}#masterkeydisplay{position:absolute;top:0;left:0;width:100%;padding:15px;box-sizing:border-box;background-color:rgba(0,34,68,.8);display:flex;align-items:center;opacity:0;pointer-events:none;transition:opacity .3s}#masterkeydisplay .key-icon{height:30px;width:30px}#masterkeydisplay .key-icon svg{height:inherit;width:inherit}#masterkeydisplay .key-info{text-align:left;padding:0 20px;box-sizing:border-box;overflow:hidden}#masterkeydisplay .key-info>*{overflow:hidden;text-overflow:ellipsis}#masterkey-alias{font-size:24pt;margin-bottom:7px}#masterkey-id{font-size:11pt}#masterkey-storage-id{font-size:7pt;text-align:right}#messagebox{padding:12px;box-sizing:border-box;width:80%;background-color:rgba(0,0,0,.8);border-radius:10px 10px 0 0;position:fixed;bottom:0;left:10%;transition:.5s;z-index:555;word-wrap:break-word}#messagebox.gone{transform:translateY(50px);opacity:0}#messagebox.error{background-color:red;color:#000;font-weight:700}#qrdisplay-background{position:absolute;top:0;left:0;z-index:299;height:100%;width:100%;overflow:hidden;transform:translateY(-102%);background-color:rgba(0,0,0,.4);opacity:0;transition:opacity .3s;pointer-events:none}#qrdisplay-content{padding:15px;background-color:rgba(0,0,0,.8);word-break:break-all;text-align:center}#qrdisplay-qr{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);padding:40px;background-color:#fff}#qrdisplay-background.active{transform:translateY(0);opacity:1;pointer-events:all}#qrreader-background{position:absolute;top:0;left:0;z-index:299;height:100%;width:100%;overflow:hidden;background-color:rgba(0,0,0,.8);display:flex;align-items:center;transform:translateY(-102%);opacity:0;transition:opacity .3s;pointer-events:none}#qrreader-background video{width:100vw;height:100vw;object-fit:cover}#qrreader-background.active{transform:translateY(0);opacity:1;pointer-events:all}.edit-server #editserverframe{z-index:20;opacity:1;pointer-events:all}#editserverframe{position:absolute;top:0;left:0;padding:30px;width:100%;height:100%;box-sizing:border-box;z-index:0;opacity:0;transition:opacity .3s;background-color:rgba(0,0,0,.8);pointer-events:none;display:flex;flex-direction:column;justify-content:space-between}#editserverframe h1{font-size:24pt;line-height:120%;text-align:right;background-color:rgba(0,34,68,.8);padding:20px;margin:-30px -30px 0}#editserverframe label{font-size:12pt;display:block;text-align:left;margin-bottom:5px;margin-top:20px}#editserverframe input{display:block;font-size:16pt;padding:12px;box-sizing:border-box;text-align:center;width:100%;background:rgba(0,34,68,.5);color:#fff;border-bottom:2px solid #004085}#editserverframe input.okay{border-bottom:2px solid #0d8500}#editserverframe input.error{border-bottom:2px solid #850000}#editserverframe input.typing{border-bottom:2px solid #854d00}#editserverframe .passive{opacity:.2;pointer-events:none}#error-message{display:none;color:red}.group.error #error-message{display:block}.group.error .happy-smiley{display:none}#stated-server-id-display{font-size:10pt;padding:20px 12px;overflow:hidden;text-overflow:ellipsis;background-color:#000}#button-line{display:flex;justify-content:space-around;align-items:center;margin-bottom:20px}#accept-edit-button{width:130px;font-size:18pt;padding:12px;box-sizing:border-box;position:relative;cursor:pointer;background-color:rgba(0,34,68,.8);color:#fff;border-radius:15px}#cancel-edit-button{width:130px;font-size:18pt;padding:12px;box-sizing:border-box;position:relative;cursor:pointer;background-color:rgba(51,0,0,.8);color:#fff;border-radius:15px}.display-servers #server-list{z-index:20;opacity:1;pointer-events:all}#server-list.empty #no-server-indication{display:block}#server-list{position:relative;padding:100px 10px;width:100%;height:100%;overflow-y:auto;box-sizing:border-box;z-index:0;opacity:0;transition:opacity .3s;pointer-events:none}#server-list .server-entry{border-radius:4px;background-color:rgba(0,34,68,.8);padding:15px 10px 5px;overflow:hidden;height:fit-content;margin-top:42px}#server-list .entry-top{display:flex;align-items:cente}#server-list .server-icon{height:25px;width:25px}#server-list .server-icon svg{height:inherit;width:inherit}#server-list .server-info{flex-grow:1;text-align:left;padding-right:20px;box-sizing:border-box;overflow:hidden;min-width:150px}#server-list .server-buttons{flex-grow:0}#server-list .edit-button{display:block;border-radius:9px;background-color:rgba(0,34,68,.8);padding:12px;height:fit-content}#server-list .edit-button svg{height:23px;width:23px}#server-list .delete-button{margin-top:7px;display:block;border-radius:9px;background-color:rgba(51,0,0,.8);padding:12px;height:fit-content}#server-list .delete-button svg{height:23px;width:23px}#server-list .entry-bottom{display:block;margin-top:15px;width:100%}#server-list .manage-button{border-radius:20px;background-color:rgba(0,34,68,.667);padding:20px;box-sizing:border-box;width:100%}#server-list .manage-button svg{height:23px;width:23px;padding-right:5px}.display-servers #addserverbutton{z-index:22;opacity:1;pointer-events:all}#addserverbutton{display:block;position:absolute;bottom:10px;right:20px;color:#fff;opacity:0;pointer-events:none;background-color:rgba(0,34,68,.8);transition:opacity .3s;border-radius:50%;height:60px;width:60px}#addserverbutton svg{height:inherit;width:inherit}#no-server-indication{display:none;color:#024;margin-top:32vh;font-weight:700}#svgicon-symbols{display:none}#svgicon-definitions{position:absolute;height:0;width:0;bottom:0;right:0}.usermodal{position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0,34,68,.7);z-index:-1;opacity:0;transition:opacity .3s}.usermodal .click-catcher{position:absolute;top:0;left:0;width:100%;height:100%}.usermodal.shown{z-index:999;opacity:1}.modal-container{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);box-sizing:border-box;background-color:#fff;width:90%;border-radius:3px;overflow:hidden}.modal-container .modal-header{display:flex;justify-content:space-between;align-items:center;width:100%;border:none;background-color:rgba(0,34,68,.05);box-shadow:0 0 5px 1px rgba(0,0,0,.2);height:55px}.modal-container .modal-header-title{padding-left:20px;padding-top:5px;font-size:16pt;font-weight:700}.modal-container .modal-close-button{height:30px;width:30px;padding-right:10px}.modal-container .modal-content{padding:20px 20px 30px}.modal-container .modal-actions{display:flex;align-items:center;gap:4px;width:100%;height:55px;padding:4px;box-sizing:border-box;box-shadow:0 0 5px 1px rgba(0,0,0,.2);background-color:rgba(0,34,68,.05)}.modal-container .modal-actions .click-button{flex-grow:1;border-radius:2px;background-color:cd-turquoise;padding:10px 20px;color:#fff;width:100%;box-sizing:border-box;text-align:center;font-size:15pt}.modal-container .modal-actions .click-button:hover{opacity:.8}#deleteconfirmation{color:#024}#deleteconfirmation .modal-actions .modal-accept-button{background-color:#300}#deleteconfirmation .modal-actions .modal-cancel-button{background-color:transparent;color:#024;font-size:12pt}</style></head><body><svg id="svgicon-definitions"><defs><filter id="svg-dropshadow-filter" height="130%" width="130%"><fegaussianblur in="SourceGraphic" stddeviation="3" result="blurOut"></fegaussianblur><feColorMatrix in="blurOut" type="saturate" values="0.25" result="shadowOut"></feColorMatrix><feblend in="SourceGraphic" in2="shadowOut" mode="normal"></feblend></filter></defs></svg> <svg id="svgicon-symbols"><symbol id="svg-cross-icon" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path path fill="currentColor" d="M13.46,12L19,17.54V19H17.54L12,13.46L6.46,19H5V17.54L10.54,12L5,6.46V5H6.46L12,10.54L17.54,5H19V6.46L13.46,12Z"></path></symbol><symbol id="svg-menu-icon" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path fill="currentColor" d="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z"></path></symbol><symbol id="svg-chevron-left-icon" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path fill="currentColor" d="M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z"></path></symbol><symbol id="svg-chevron-right-icon" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path fill="currentColor" d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"></path></symbol><symbol id="svg-settings-icon" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path fill="currentColor" d="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z"></path></symbol><symbol id="svg-account-icon" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path fill="currentColor" d="M12,19.2C9.5,19.2 7.29,17.92 6,16C6.03,14 10,12.9 12,12.9C14,12.9 17.97,14 18,16C16.71,17.92 14.5,19.2 12,19.2M12,5A3,3 0 0,1 15,8A3,3 0 0,1 12,11A3,3 0 0,1 9,8A3,3 0 0,1 12,5M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12C22,6.47 17.5,2 12,2Z"></path></symbol><symbol id="svg-key-shield-icon" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path fill="currentColor" d="M12,8A1,1 0 0,1 13,9A1,1 0 0,1 12,10A1,1 0 0,1 11,9A1,1 0 0,1 12,8M21,11C21,16.55 17.16,21.74 12,23C6.84,21.74 3,16.55 3,11V5L12,1L21,5V11M12,6A3,3 0 0,0 9,9C9,10.31 9.83,11.42 11,11.83V18H13V16H15V14H13V11.83C14.17,11.42 15,10.31 15,9A3,3 0 0,0 12,6Z"></path></symbol><symbol id="svg-data-icon" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path fill="currentColor" d="M4 4C2.9 4 2 4.9 2 6V18C2 19.1 2.9 20 4 20H20C21.1 20 22 19.1 22 18V8C22 6.9 21.1 6 20 6H12L10 4M11 10C12.3 10 13.4 10.8 13.8 12H20V14H18V16H16V14H13.8C13.4 15.2 12.3 16 11 16C9.3 16 8 14.7 8 13S9.3 10 11 10M11 12C10.4 12 10 12.4 10 13C10 13.6 10.4 14 11 14C11.6 14 12 13.6 12 13S11.6 12 11 12Z"></path></symbol><symbol id="svg-server-icon" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path fill="currentColor" d="M13,19H14A1,1 0 0,1 15,20H22V22H15A1,1 0 0,1 14,23H10A1,1 0 0,1 9,22H2V20H9A1,1 0 0,1 10,19H11V17H4A1,1 0 0,1 3,16V12A1,1 0 0,1 4,11H20A1,1 0 0,1 21,12V16A1,1 0 0,1 20,17H13V19M4,3H20A1,1 0 0,1 21,4V8A1,1 0 0,1 20,9H4A1,1 0 0,1 3,8V4A1,1 0 0,1 4,3M9,7H10V5H9V7M9,15H10V13H9V15M5,5V7H7V5H5M5,13V15H7V13H5Z"></path></symbol><symbol id="svg-signal-icon" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path fill="currentColor" d="M12 10C10.9 10 10 10.9 10 12S10.9 14 12 14 14 13.1 14 12 13.1 10 12 10M18 12C18 8.7 15.3 6 12 6S6 8.7 6 12C6 14.2 7.2 16.1 9 17.2L10 15.5C8.8 14.8 8 13.5 8 12.1C8 9.9 9.8 8.1 12 8.1S16 9.9 16 12.1C16 13.6 15.2 14.9 14 15.5L15 17.2C16.8 16.2 18 14.2 18 12M12 2C6.5 2 2 6.5 2 12C2 15.7 4 18.9 7 20.6L8 18.9C5.6 17.5 4 14.9 4 12C4 7.6 7.6 4 12 4S20 7.6 20 12C20 15 18.4 17.5 16 18.9L17 20.6C20 18.9 22 15.7 22 12C22 6.5 17.5 2 12 2Z"></path></symbol><symbol id="svg-stun-icon" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path fill="currentColor" d="M8,10V13H14V18H8V21L2,15.5L8,10M22,8.5L16,3V6H10V11H16V14L22,8.5Z"></path></symbol><symbol id="svg-qrscan-icon" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path fill="currentColor" d="M4,4H10V10H4V4M20,4V10H14V4H20M14,15H16V13H14V11H16V13H18V11H20V13H18V15H20V18H18V20H16V18H13V20H11V16H14V15M16,15V18H18V15H16M4,20V14H10V20H4M6,6V8H8V6H6M16,6V8H18V6H16M6,16V18H8V16H6M4,11H6V13H4V11M9,11H13V15H11V13H9V11M11,6H13V10H11V6M2,2V6H0V2A2,2 0 0,1 2,0H6V2H2M22,0A2,2 0 0,1 24,2V6H22V2H18V0H22M2,18V22H6V24H2A2,2 0 0,1 0,22V18H2M22,22V18H24V22A2,2 0 0,1 22,24H18V22H22Z"></path></symbol><symbol id="svg-qrcode-icon" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path fill="currentColor" d="M3,11H5V13H3V11M11,5H13V9H11V5M9,11H13V15H11V13H9V11M15,11H17V13H19V11H21V13H19V15H21V19H19V21H17V19H13V21H11V17H15V15H17V13H15V11M19,19V15H17V19H19M15,3H21V9H15V3M17,5V7H19V5H17M3,3H9V9H3V3M5,5V7H7V5H5M3,15H9V21H3V15M5,17V19H7V17H5Z"></path></symbol><symbol id="svg-code-icon" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path fill="currentColor" d="M5,3H7V5H5V10A2,2 0 0,1 3,12A2,2 0 0,1 5,14V19H7V21H5C3.93,20.73 3,20.1 3,19V15A2,2 0 0,0 1,13H0V11H1A2,2 0 0,0 3,9V5A2,2 0 0,1 5,3M19,3A2,2 0 0,1 21,5V9A2,2 0 0,0 23,11H24V13H23A2,2 0 0,0 21,15V19A2,2 0 0,1 19,21H17V19H19V14A2,2 0 0,1 21,12A2,2 0 0,1 19,10V5H17V3H19M12,15A1,1 0 0,1 13,16A1,1 0 0,1 12,17A1,1 0 0,1 11,16A1,1 0 0,1 12,15M8,15A1,1 0 0,1 9,16A1,1 0 0,1 8,17A1,1 0 0,1 7,16A1,1 0 0,1 8,15M16,15A1,1 0 0,1 17,16A1,1 0 0,1 16,17A1,1 0 0,1 15,16A1,1 0 0,1 16,15Z"></path></symbol><symbol id="svg-gitub-icon" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path fill="currentColor" d="M12,2A10,10 0 0,0 2,12C2,16.42 4.87,20.17 8.84,21.5C9.34,21.58 9.5,21.27 9.5,21C9.5,20.77 9.5,20.14 9.5,19.31C6.73,19.91 6.14,17.97 6.14,17.97C5.68,16.81 5.03,16.5 5.03,16.5C4.12,15.88 5.1,15.9 5.1,15.9C6.1,15.97 6.63,16.93 6.63,16.93C7.5,18.45 8.97,18 9.54,17.76C9.63,17.11 9.89,16.67 10.17,16.42C7.95,16.17 5.62,15.31 5.62,11.5C5.62,10.39 6,9.5 6.65,8.79C6.55,8.54 6.2,7.5 6.75,6.15C6.75,6.15 7.59,5.88 9.5,7.17C10.29,6.95 11.15,6.84 12,6.84C12.85,6.84 13.71,6.95 14.5,7.17C16.41,5.88 17.25,6.15 17.25,6.15C17.8,7.5 17.45,8.54 17.35,8.79C18,9.5 18.38,10.39 18.38,11.5C18.38,15.32 16.04,16.16 13.81,16.41C14.17,16.72 14.5,17.33 14.5,18.26C14.5,19.6 14.5,20.68 14.5,21C14.5,21.27 14.66,21.59 15.17,21.5C19.14,20.16 22,16.42 22,12A10,10 0 0,0 12,2Z"></path></symbol><symbol id="svg-check-icon" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></symbol><symbol id="svg-add-icon" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path fill="currentColor" d="M17,13H13V17H11V13H7V11H11V7H13V11H17M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"></path></symbol><symbol id="svg-copy-icon" preserveAspectRatio="xMidYMid meet" viewBox="-21 0 512 512"><path fill="currentColor" d="m325.332031 512h-266.664062c-32.363281 0-58.667969-26.304688-58.667969-58.667969v-288c0-32.363281 26.304688-58.664062 58.667969-58.664062h10.664062c8.832031 0 16 7.167969 16 16s-7.167969 16-16 16h-10.664062c-14.699219 0-26.667969 11.964843-26.667969 26.664062v288c0 14.699219 11.96875 26.667969 26.667969 26.667969h266.664062c14.699219 0 26.667969-11.96875 26.667969-26.667969v-10.664062c0-8.832031 7.167969-16 16-16s16 7.167969 16 16v10.664062c0 32.363281-26.304688 58.667969-58.667969 58.667969zm0 0"></path><path fill="currentColor" d="m410.667969 384h-224c-32.363281 0-58.667969-26.304688-58.667969-58.667969v-266.664062c0-32.363281 26.304688-58.667969 58.667969-58.667969h224c32.363281 0 58.664062 26.304688 58.664062 58.667969v266.664062c0 32.363281-26.300781 58.667969-58.664062 58.667969zm-224-352c-14.699219 0-26.667969 11.96875-26.667969 26.667969v266.664062c0 14.699219 11.96875 26.667969 26.667969 26.667969h224c14.699219 0 26.664062-11.96875 26.664062-26.667969v-266.664062c0-14.699219-11.964843-26.667969-26.664062-26.667969zm0 0"></path></symbol><symbol id="svg-trash-icon" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path fill="currentColor" d="M9,3V4H4V6H5V19A2,2 0 0,0 7,21H17A2,2 0 0,0 19,19V6H20V4H15V3H9M9,8H11V17H9V8M13,8H15V17H13V8Z"></path></symbol><symbol id="svg-edit-icon" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path fill="currentColor" d="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z"></path></symbol><symbol id="svg-smile-edgy-icon" preserveAspectRatio="xMidYMid meet" viewBox="0 -1 12 12"><g fill="currentColor" transform="translate(-344.000000, -6165.000000)" fill-rule="evenodd"><g transform="translate(56.000000, 160.000000)"><path d="M296,6007.10526 L300,6007.10526 L300,6005 L296,6005 L296,6007.10526 Z M291,6010.26316 L289,6010.26316 C289,6016.57895 299,6016.57895 299,6010.26316 L297,6010.26316 C297,6014.47368 291,6014.47368 291,6010.26316 L291,6010.26316 Z M288,6007.10526 L292,6007.10526 L292,6005 L288,6005 L288,6007.10526 Z"></path></g></g></symbol><symbol id="svg-smile-smirk-icon" preserveAspectRatio="xMidYMid meet" viewBox="0 0 64 64"><path fill="currentColor" d="M32,61A29,29,0,1,1,61,32,29,29,0,0,1,32,61ZM32,5A27,27,0,1,0,59,32,27,27,0,0,0,32,5ZM42,28a6,6,0,1,1,6-6A6,6,0,0,1,42,28Zm0-10a4,4,0,1,0,4,4A4,4,0,0,0,42,18ZM22,28a6,6,0,1,1,6-6A6,6,0,0,1,22,28Zm0-10a4,4,0,1,0,4,4A4,4,0,0,0,22,18ZM46.75,34a1,1,0,0,0-2,0A9.82,9.82,0,0,1,35,43.8h-2.7a1,1,0,0,0,0,2H35A11.81,11.81,0,0,0,46.75,34Z"></path></symbol><symbol id="svg-key-icon" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path fill="currentColor" d="M7 14C5.9 14 5 13.1 5 12S5.9 10 7 10 9 10.9 9 12 8.1 14 7 14M12.6 10C11.8 7.7 9.6 6 7 6C3.7 6 1 8.7 1 12S3.7 18 7 18C9.6 18 11.8 16.3 12.6 14H16V18H20V14H23V10H12.6Z"></path></symbol><symbol id="svg-manage-clients-icon" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path fill="currentColor" d="M22.9 21.2L18.8 17.1C19.2 16.1 19 14.8 18.1 14C17.2 13.1 15.9 12.9 14.8 13.4L16.7 15.3L15.3 16.7L13.3 14.7C12.8 15.8 13 17.1 13.9 18.1C14.8 19 16 19.2 17 18.8L21.1 22.9C21.3 23.1 21.6 23.1 21.7 22.9L22.7 21.9C23 21.6 23 21.3 22.9 21.2M13 20H2V18C2 15.8 5.6 14 10 14C10.5 14 11 14 11.4 14.1C11.1 14.7 11 15.3 11 16C11 17.6 11.8 19.1 13 20M10 4C7.8 4 6 5.8 6 8S7.8 12 10 12 14 10.2 14 8 12.2 4 10 4"></path></symbol></svg><div id="qrdisplay-background"><div id="qrdisplay-content"></div><div id="qrdisplay-qr"></div></div><div class="gone" id="messagebox"></div><div id="qrreader-background"><video id="qrreader-video-element"></video></div><div class="hidden-templates"><div id="deleteconfirmation-content-message-template">Please confirm deleting your Server <b>{{{serverName}}}</b>.<br><br>It cannot be undone.</div></div><div class="usermodal" id="deleteconfirmation"><div class="click-catcher"></div><div class="modal-container"><div class="modal-header"><h2 class="modal-header-title">Attention!</h2><div class="modal-close-button click-button"><svg><use href="#svg-cross-icon"></use></svg></div></div><div class="modal-content"></div><div class="modal-actions"><div class="modal-accept-button click-button">Delete</div><div class="modal-cancel-button click-button">No!</div></div></div></div><div id="content"><div id="overlay-frame"><div id="setmasterkeyframe"><h1>Your Master Key to Use</h1><div class="group"><label id="floating-secret-label" for="floating-secret">Floating Secret</label> <input id="floating-secret-input" type="password" name="floating-secret"></div><div class="group"><div class="happy-smiley"><svg><use href="#svg-smile-edgy-icon"></use></svg></div></div><div class="group passive"><label id="alias-label">Master Key Id</label><div id="key-id-display"></div><div id="storage-id-display"></div><label id="alias-label">Master Key Alias</label> <input id="alias-input"><div class="click-button" id="accept-use-button">Use</div></div></div><div class="hidden-templates"><div class="client-entry" id="client-entry-template-element" client-index="{{{index}}}"><div class="client-entry-left"><div class="client-alias server-name">{{{client.alias}}}</div><div class="client-id server-id">{{{client.id}}}</div></div><div class="client-entry-right"><div class="delete-button click-button"><svg><use href="#svg-trash-icon"></use></svg></div></div></div></div><div id="clientmanager"><h1>Manage Server Clients</h1><div class="error" id="managed-server-info"><div class="server-name" id="managed-server-name">ServerName</div><div class="server-url" id="managed-server-url">https://server-url.org/server-route</div><div class="server-id" id="managed-server-id">0x2323232322323232323232323232323232</div></div><div id="display-clients-container"><div id="server-error-message">Error: Cannot retrieve clients.</div><div id="clients-to-serve-list"><div id="no-clients-message">Server has no clients to serve yet.</div></div><div id="add-client-frame"><label for="client-alias-input">Client Name</label> <input id="client-alias-input" placeholder="Client Name"> <label for="client-id-input">Client Id</label> <input id="client-id-input" placeholder="Client Id"><div class="click-button passive" id="add-client-button"><svg><use href="#svg-add-icon"></use></svg>Add Client To Serve</div></div></div><div class="click-button" id="start-add-button"><svg><use href="#svg-add-icon"></use></svg></div><div class="click-button" id="stop-add-button"><svg><use href="#svg-cross-icon"></use></svg></div></div><div id="editserverframe"><h1>Server Details</h1><div class="group"><label for="server-name-input">Server Name</label> <input id="server-name-input" name="server-name"> <label for="server-url-input">Server URL</label> <input id="server-url-input" name="server-url"> <label>Stated Server Id</label><div id="stated-server-id-display"></div><label for="server-id-input">Server Id</label> <input id="server-id-input" name="server-id"></div><div class="group"><div id="error-message"></div><div class="happy-smiley"><svg><use href="#svg-smile-edgy-icon"></use></svg></div></div><div class="group" id="button-line"><button class="click-button" id="cancel-edit-button">Cancel</button> <button class="click-button passive" id="accept-edit-button">Accept</button></div></div></div><div id="main-frame"><div class="click-button" id="masterkeydisplay"><div class="key-icon"><svg><use href="#svg-key-icon"></use></svg></div><div class="key-info"><div id="masterkey-alias"></div><div id="masterkey-id"></div><div id="masterkey-storage-id"></div></div></div><div class="hidden-templates"><div class="server-entry" id="server-entry-template-element" server-index="{{{index}}}"><div class="entry-top"><div class="server-info"><div class="server-name">{{{server.name}}}</div><div class="server-url">{{{server.url}}}</div><div class="server-id">{{{server.id}}}</div></div><div class="server-buttons"><div class="edit-button click-button"><svg><use href="#svg-edit-icon"></use></svg></div><div class="delete-button click-button"><svg><use href="#svg-trash-icon"></use></svg></div></div></div><div class="entry-bottom"><div class="manage-button click-button"><svg><use href="#svg-manage-clients-icon"></use></svg>Manage Clients</div></div></div></div><div class="empty" id="server-list"><div id="no-server-indication"><p>No Servers Yet.</p></div></div><div class="click-button" id="addserverbutton"><svg><use href="#svg-add-icon"></use></svg></div></div></div><script>(()=>{var d,u,l,n={13:function(t,e,n){!function(){var e={name:"indexdomconnect",initialize:function(){n.g.content=document.getElementById("content"),n.g.serverEntryTemplateElement=document.getElementById("server-entry-template-element"),n.g.serverList=document.getElementById("server-list"),n.g.addserverbutton=document.getElementById("addserverbutton"),n.g.masterkeydisplay=document.getElementById("masterkeydisplay"),n.g.masterkeyAlias=document.getElementById("masterkey-alias"),n.g.masterkeyId=document.getElementById("masterkey-id"),n.g.masterkeyStorageId=document.getElementById("masterkey-storage-id"),n.g.serverNameInput=document.getElementById("server-name-input"),n.g.serverUrlInput=document.getElementById("server-url-input"),n.g.statedServerIdDisplay=document.getElementById("stated-server-id-display"),n.g.serverIdInput=document.getElementById("server-id-input"),n.g.errorMessage=document.getElementById("error-message"),n.g.cancelEditButton=document.getElementById("cancel-edit-button"),n.g.acceptEditButton=document.getElementById("accept-edit-button"),n.g.clientEntryTemplateElement=document.getElementById("client-entry-template-element"),n.g.clientmanager=document.getElementById("clientmanager"),n.g.clientsToServeList=document.getElementById("clients-to-serve-list"),n.g.clientAliasInput=document.getElementById("client-alias-input"),n.g.clientIdInput=document.getElementById("client-id-input"),n.g.addClientButton=document.getElementById("add-client-button"),n.g.startAddButton=document.getElementById("start-add-button"),n.g.stopAddButton=document.getElementById("stop-add-button"),n.g.floatingSecretInput=document.getElementById("floating-secret-input"),n.g.keyIdDisplay=document.getElementById("key-id-display"),n.g.storageIdDisplay=document.getElementById("storage-id-display"),n.g.aliasInput=document.getElementById("alias-input"),n.g.acceptUseButton=document.getElementById("accept-use-button"),n.g.deleteconfirmation=document.getElementById("deleteconfirmation"),n.g.qrreaderBackground=document.getElementById("qrreader-background"),n.g.qrreaderVideoElement=document.getElementById("qrreader-video-element"),n.g.messagebox=document.getElementById("messagebox"),n.g.qrdisplayBackground=document.getElementById("qrdisplay-background"),n.g.qrdisplayContent=document.getElementById("qrdisplay-content"),n.g.qrdisplayQr=document.getElementById("qrdisplay-qr")}};t.exports=e}.call(this)},426:function(y,e,w){!function(){var o,n,r,s,l,a,i,c,d,u,t,h,e,f,m,p,g={name:"statemodule"},v=function(e){null!=allModules.debugmodule.modulesToDebug.statemodule&&console.log("[statemodule]: "+e)};try{c=w(Object((()=>{var e=new Error("Cannot find module './defaultstate.js'");throw e.code="MODULE_NOT_FOUND",e})()))}catch(e){}p=null,o={},u={},a={},h=function(){var e,t;for(t in p=null!=(p=localStorage.getItem("state"))?JSON.parse(p):{})null==(e=p[t])&&(e=null),null!=e&&null!=e.content||(p[t]={content:e}),o[t]=p[t];for(t in c)e=c[t],null==o[t]&&(o[t]={content:e,isVolatile:!0})},d=function(e,t){return e!==t},l=function(e,t){var n=a[e]||d;return null==o[e]||(o[e].content,n(o[e].content,t))},t=function(e){var t;return v("loadDedicated"),t=localStorage.getItem(e),t=JSON.parse(t),o[e]={content:t,isDedicated:!0},t},f=function(e){var t;v("saveDedicatedState"),t=o[e].content,o[e].isDedicated=!0,t=JSON.stringify(t),localStorage.setItem(e,t)},m=function(){var e;v("saveRegularState"),e=JSON.stringify(p),localStorage.setItem("state",e)},r=function(e,t,n,r){var a,i=null!=o[e]&&o[e].isVolatile;if("boolean"!=typeof n&&(n=null!=o[e]&&!0===o[e].isDedicated),null!=o[e]){if(a=o[e].isDedicated?n!==o[e].isDedicated:n,!(l(e,t)||i||a))return;o[e].content=t,n&&(o[e].isDedicated=!0),a&&!n&&(localStorage.removeItem(e),delete o[e].isDedicated),i&&delete o[e].isVolatile}else o[e]={content:t,isDedicated:n};if(n?(f(e),null!=p[e]&&(delete p[e],m())):(null==p[e]&&(p[e]=o[e]),m()),!r)return s(e)},e=function(){for(var e in v("saveAllStates"),o)o[e].isDedicated&&f(e);m()},n=function(e,t,n){if(l(e,t)){try{o[e].content=t}catch(n){o[e]={content:t,isVolatile:!0}}if(!n)return s(e)}},i=function(e){var t;if(1!==(t=Object.keys(e)).length)throw new Error("Object did not have exactly one Member!");return{key:t=t[0],content:e[t]}},s=async function(a){var i,e;if(null!=u[a])return e=(()=>{for(var e,t=[],n=0,r=(e=u[a]).length;n<r;n++)i=e[n],t.push(i());return t})(),Promise.all(e)},g.getState=function(){return o},g.load=function(e){return v("statemodule.load"),null!=o[e]&&o[e].isVolatile?o[e].content:null==o[e]||o[e].isDedicated?t(e):(h(),o[e].content)},g.save=function(e,t,n){if(v("statemodule.save"),null!=e)return"object"==typeof e&&({key:e,content:t}=i(e)),null==t&&null==n?f(e):r(e,t,n,!1)},g.saveSilently=function(e,t,n){return v("statemodule.saveSilently"),"object"==typeof e&&({key:e,content:t}=i(e)),r(e,t,n,!0)},g.saveAll=e,g.saveRegularState=m,g.remove=function(e){v("statemodule.remove"),null!=o[e]&&(o[e].isVolatile?delete o[e]:o[e].isDedicated?(localStorage.removeItem(e),delete o[e]):(delete o[e],delete p[e],m()))},g.get=function(e){if(null!=o[e])return o[e].content},g.set=function(e,t){v("statemodule.set"),"object"==typeof e&&({key:e,content:t}=i(e)),n(e,t,!1)},g.setSilently=function(e,t){v("statemodule.setSilently"),"object"==typeof e&&({key:e,content:t}=i(e)),n(e,t,!0)},g.addOnChangeListener=function(e,t){v("statemodule.addOnChangeListener"),null==u[e]&&(u[e]=[]),u[e].push(t)},g.removeOnChangeListener=function(e,t){var n,r,a,i;if(v("statemodule.removeOnChangeListener"),null!=(n=u[e])){for(r=a=0,i=n.length;a<i;r=++a)if(n[r]===t)return v("candidate found at: "+r),n[r]=n[n.length-1],void n.pop();v("No candidate found for given function!")}},g.clearOnChangeListeners=function(e,t){v("statemodule.clearOnChangeListener"),u[e]=[]},g.callOutChange=function(e){return s(e)},g.setChangeDetectionFunction=function(e,t){null==t?delete a[e]:a[e]=t},h(),y.exports=g}.call(this)}},r={};function U(e){var t=r[e];return void 0!==t||(t=r[e]={exports:{}},n[e].call(t.exports,t,t.exports,U)),t.exports}U.m=n,U.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return U.d(t,{a:t}),t},U.d=(e,t)=>{for(var n in t)U.o(t,n)&&!U.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},U.f={},U.e=n=>Promise.all(Object.keys(U.f).reduce((e,t)=>(U.f[t](n,e),e),[])),U.u=e=>e+".js",U.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),U.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),d={},u="auth-master-ui:",U.l=(r,e,t,n)=>{if(d[r])d[r].push(e);else{var a,i;if(void 0!==t)for(var o=document.getElementsByTagName("script"),s=0;s<o.length;s++){var l=o[s];if(l.getAttribute("src")==r||l.getAttribute("data-webpack")==u+t){a=l;break}}a||(i=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,U.nc&&a.setAttribute("nonce",U.nc),a.setAttribute("data-webpack",u+t),a.src=r),d[r]=[e];var e=(e,t)=>{a.onerror=a.onload=null,clearTimeout(c);var n=d[r];if(delete d[r],a.parentNode&&a.parentNode.removeChild(a),n&&n.forEach(e=>e(t)),e)return e(t)},c=setTimeout(e.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=e.bind(null,a.onerror),a.onload=e.bind(null,a.onload),i&&document.head.appendChild(a)}},U.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},U.p="",l={57:0},U.f.j=(n,e)=>{var t,r,a=U.o(l,n)?l[n]:void 0;0!==a&&(a?e.push(a[2]):(t=new Promise((e,t)=>a=l[n]=[e,t]),e.push(a[2]=t),e=U.p+U.u(n),r=new Error,U.l(e,e=>{var t;U.o(l,n)&&(0!==(a=l[n])&&(l[n]=void 0),a)&&(t=e&&("load"===e.type?"missing":e.type),e=e&&e.target&&e.target.src,r.message="Loading chunk "+n+" failed.\n("+t+": "+e+")",r.name="ChunkLoadError",r.type=t,r.request=e,a[1](r))},"chunk-"+n,n)))},Ee=(e,t)=>{var n,r,[a,i,o]=t,s=0;if(a.some(e=>0!==l[e])){for(n in i)U.o(i,n)&&(U.m[n]=i[n]);o&&o(U)}for(e&&e(t);s<a.length;s++)r=a[s],U.o(l,r)&&l[r]&&l[r][0](),l[r]=0},($=self.webpackChunkauth_master_ui=self.webpackChunkauth_master_ui||[]).forEach(Ee.bind(null,0)),$.push=Ee.bind(null,$.push.bind($));{var be={},Ee=(U.r(be),U.d(be,{error:()=>W,info:()=>zt,initialize:()=>$t}),{}),$=(U.r(Ee),U.d(Ee,{add0x:()=>Jt,clearElement:()=>Yt,copyToClipboard:()=>Xt,isValidKey:()=>Zt,seedToKey:()=>Gt,strip0x:()=>Qt}),{}),Se=(U.r($),U.d($,{decrypt:()=>Zn,encrypt:()=>Gn,focusFloatingSecretInput:()=>er,getAuthMasterClient:()=>Yn,getStorageId:()=>Xn,initialize:()=>Hn,isSet:()=>Qn}),{}),Ce=(U.r(Se),U.d(Se,{getAliasForId:()=>ar,getIdForAlias:()=>ir,initialize:()=>tr,loadForStorageId:()=>rr,setAliasForId:()=>or}),{}),ke=(U.r(Ce),U.d(Ce,{setToDisplayServerState:()=>lr,setToEditServerState:()=>cr,setToManageClientsState:()=>dr,setToNoMasterkeyState:()=>sr}),{}),xe=(U.r(ke),U.d(ke,{deleteServer:()=>va,display:()=>ma,getServer:()=>ga,initialize:()=>Jr,setEditData:()=>pa}),{}),_e=(U.r(xe),U.d(xe,{initialize:()=>ya,setServer:()=>Oa}),{}),Ne=(U.r(_e),U.d(_e,{applyUIState:()=>ni,applyUIStateBase:()=>ri,applyUIStateModifier:()=>ai,getBase:()=>oi,getContext:()=>si,getModifier:()=>ii}),{}),Be=(U.r(Ne),U.d(Ne,{appVersion:()=>li,defaultServerChoice:()=>di,defaultServerOptions:()=>ci}),{}),Le=(U.r(Be),U.d(Be,{initialize:()=>ui}),{}),Ae=(U.r(Le),U.d(Le,{modulesToDebug:()=>wi}),{}),Te=(U.r(Ae),U.d(Ae,{displayCode:()=>xi,initialize:()=>Ci}),{});function j(t){var n;return{log:n=function(e){Oe[t]&&console.log("["+t+"]: "+e)},olog:function(e){return n("\n"+Re(e))}}}U.r(Te),U.d(Te,{initialize:()=>Ai,read:()=>Mi});var Oe,Re,De,Me,qe,Pe,He,Ue={};U.r(Ue),U.d(Ue,{initialize:()=>qi}),Re=function(e){return JSON.stringify(e,null,4)},Oe={};let d=2n**255n-19n,s=2n**252n+27742317777372353535851937790883648493n,e=0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51an,t=0x6666666666666666666666666666666666666666666666666666666666666658n,h={a:-1n,d:37095705934669439343138083508754565189542113879843219016388785533085940283555n,p:d,n:s,h:8,Gx:e,Gy:t},u=(e="")=>{throw new Error(e)},a=e=>"string"==typeof e,l=(e,t)=>{return!((n=e)instanceof Uint8Array||null!=n&&"object"==typeof n&&"Uint8Array"===n.constructor.name)||"number"==typeof t&&0<t&&e.length!==t?u("Uint8Array of valid length expected"):e;var n},i=e=>new Uint8Array(e),f=(e,t)=>l(a(e)?o(e):i(l(e)),t),m=(e,t=d)=>{e%=t;return 0n<=e?e:t+e},p=e=>e instanceof we?e:u("Point expected");class we{constructor(e,t,n,r){this.ex=e,this.ey=t,this.ez=n,this.et=r}static fromAffine(e){return new we(e.x,e.y,1n,m(e.x*e.y))}static fromHex(e,t=!1){var n=h.d,r=(e=f(e,32)).slice(),e=e[31],r=(r[31]=-129&e,y(r)),a=(!t||0n<=r&&r<2n**256n||u("bad y coord 1"),t||0n<=r&&r<d||u("bad y coord 2"),m(r*r)),i=m(a-1n),n=m(n*a+1n);let{isValid:o,value:s}=S(i,n);o||u("bad y coordinate 3");a=1n===(1n&s),i=!!(128&e);return!t&&0n===s&&i&&u("bad y coord 3"),i!=a&&(s=m(-s)),new we(s,r,1n,m(s*r))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}equals(e){var{ex:t,ey:n,ez:r}=this,{ex:e,ey:a,ez:i}=p(e),t=m(t*i),e=m(e*r),n=m(n*i),i=m(a*r);return t===e&&n===i}is0(){return this.equals(v)}negate(){return new we(m(-this.ex),this.ey,this.ez,m(-this.et))}double(){var{ex:e,ey:t,ez:n}=this,r=h.a,a=m(e*e),i=m(t*t),n=m(2n*m(n*n)),r=m(r*a),e=e+t,t=m(m(e*e)-a-i),e=r+i,a=e-n,n=r-i,r=m(t*a),i=m(e*n),t=m(t*n),n=m(a*e);return new we(r,i,n,t)}add(e){var{ex:t,ey:n,ez:r,et:a}=this,{ex:e,ey:i,ez:o,et:s}=p(e),{a:l,d:c}=h,d=m(t*e),u=m(n*i),a=m(a*c*s),c=m(r*o),s=m((t+n)*(e+i)-d-u),r=m(c-a),o=m(c+a),t=m(u-l*d),n=m(s*r),e=m(o*t),i=m(s*t),c=m(r*o);return new we(n,e,c,i)}mul(t,n=!0){if(0n===t)return!0===n?u("cannot multiply by 0"):v;if("bigint"==typeof t&&0n<t&&t<s||u("invalid scalar, must be < L"),!n&&this.is0()||1n===t)return this;if(this.equals(g))return P(t).p;let r=v,a=g;for(let e=this;0n<t;e=e.double(),t>>=1n)1n&t?r=r.add(e):n&&(a=a.add(e));return r}multiply(e){return this.mul(e)}clearCofactor(){return this.mul(BigInt(h.h),!1)}isSmallOrder(){return this.clearCofactor().is0()}isTorsionFree(){let e=this.mul(s/2n,!1).double();return(e=e.add(this)).is0()}toAffine(){var e,{ex:t,ey:n,ez:r}=this;return this.equals(v)?{x:0n,y:1n}:(e=I(r),1n!==m(r*e)&&u("invalid inverse"),{x:m(t*e),y:m(n*e)})}toRawBytes(){var{x:e,y:t}=this.toAffine(),t=c(t);return t[31]|=1n&e?128:0,t}toHex(){return r(this.toRawBytes())}}we.BASE=new we(e,t,1n,m(e*t)),we.ZERO=new we(0n,1n,1n,0n);let{BASE:g,ZERO:v}=we,n=(e,t)=>e.toString(16).padStart(t,"0"),r=e=>Array.from(e).map(e=>n(e,2)).join(""),o=t=>{var e=t.length,n=((!a(t)||e%2)&&u("hex invalid 1"),i(e/2));for(let e=0;e<n.length;e++){var r=2*e,r=t.slice(r,2+r),r=Number.parseInt(r,16);(Number.isNaN(r)||r<0)&&u("hex invalid 2"),n[e]=r}return n},c=e=>o(n(e,64)).reverse(),y=e=>BigInt("0x"+r(i(l(e)).reverse())),w=(...e)=>{let t=i(e.reduce((e,t)=>e+l(t).length,0)),n=0;return e.forEach(e=>{t.set(e,n),n+=e.length}),t},I=(e,t=d)=>{(0n===e||t<=0n)&&u("no inverse n="+e+" mod="+t);let a=m(e,t),i=t,o=0n,s=1n,l=1n,c=0n;for(;0n!==a;){let e=i/a,t=i%a,n=o-l*e,r=s-c*e;i=a,a=t,o=l,s=c,l=n,c=r}return 1n===i?m(o,t):u("no inverse")},b=(e,t)=>{let n=e;for(;0n<t--;)n=(n*=n)%d;return n},E=19681161376707505956807079304988542015446066515923890162744021073123829784752n,S=(e,t)=>{var n=m(t*t*t),r=(s=e*m(n*n*t),i=s*s%d*s%d,i=b(i,2n)*i%d,i=b(i,1n)*s%d,i=b(i,5n)*i%d,o=b(i,10n)*i%d,o=b(o,20n)*o%d,o=b(o,40n)*o%d,r=b(o,80n)*o%d,r=b(r,80n)*o%d,o=b(r,10n)*i%d,b(o,2n)*s%d);let a=m(e*n*r);var i=m(t*a*a),o=a,s=m(a*E),n=i===e,r=i===m(-e),t=i===m(-e*E);return n&&(a=o),(r||t)&&(a=s),{isValid:n||r,value:a=1n===(1n&m(a))?m(-a):a}},C=e=>m(y(e),s),k,x=(...e)=>A.sha512Async(...e),_=(...e)=>"function"==typeof k?k(...e):u("etc.sha512Sync not set"),M=e=>{var t=e.slice(0,32),e=(t[0]&=248,t[31]&=127,t[31]|=64,e.slice(32,64)),n=C(t),r=g.mul(n),a=r.toRawBytes();return{head:t,prefix:e,scalar:n,point:r,pointBytes:a}},N=e=>x(f(e,32)).then(M),B=e=>N(e).then(e=>e.pointBytes);function $e(e,t){return e?x(t.hashable).then(t.finish):t.finish(_(t.hashable))}let q={zip215:!0},L=()=>"object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,A={bytesToHex:r,hexToBytes:o,concatBytes:w,mod:m,invert:I,randomBytes:(e=32)=>{var t=L();return t&&t.getRandomValues||u("crypto.getRandomValues must be defined"),t.getRandomValues(i(e))},sha512Async:async(...e)=>{var t=L(),e=(t&&t.subtle||u("crypto.subtle or etc.sha512Async must be defined"),w(...e));return i(await t.subtle.digest("SHA-512",e.buffer))},sha512Sync:void 0},T=void Object.defineProperties(A,{sha512Sync:{configurable:!1,get:()=>k,set(e){k=k||e}}}),P=n=>{var r=T=T||(()=>{var t=[];let n=g,r=n;for(let e=0;e<33;e++){r=n,t.push(r);for(let e=1;e<128;e++)r=r.add(n),t.push(r);n=r.double()}return t})(),a=(e,t)=>{var n=t.negate();return e?n:t};let i=v,o=g;var s=BigInt(255),l=BigInt(8);for(let t=0;t<33;t++){var c=128*t;let e=Number(n&s);n>>=l,128<e&&(e-=256,n+=1n);var d=c,c=c+Math.abs(e)-1,u=t%2!=0,h=e<0;0===e?o=o.add(a(u,r[d])):i=i.add(a(h,r[c]))}return{p:i,f:o}};function V(e){for(var t,n=new Uint8Array(e.length/2),r=t=0,a=e.length;t<a;r=t+=2)n[r/2]=Pe[e[r]]+De[e[r+1]];return n}async function je(e){return e="string"==typeof e?F(e):e,e=await Ze.digest("SHA-512",e),Ge(e)}async function Ve(e){return e="string"==typeof e?F(e):e,new Uint8Array(await Ze.digest("SHA-512",e))}async function ze(e){return e=await B(e),Ge(e)}async function Fe(e,t){return e=await(async(e,t)=>{e=f(e),t=await N(t);return $e(!0,((e,t,n)=>{let{pointBytes:r,scalar:a}=e,i=C(t),o=g.mul(i).toRawBytes();return{hashable:w(o,r,n),finish:e=>{e=m(i+C(e)*a,s);return l(w(o,c(e)),64)}}})(t,await x(t.prefix,e),e))})(F(e),V(t)),Ge(e)}async function We(e,t,n){var r,e=V(e),t=V(t),n=F(n);return e=e,n=n,t=t,r=q,$e(!0,((e,t,n,r)=>{t=f(t),e=f(e,64);let a=r.zip215,i,o,s,l,c=new Uint8Array;try{i=we.fromHex(n,a),o=we.fromHex(e.slice(0,32),a),s=y(e.slice(32,64)),l=g.mul(s,!1),c=w(o.toRawBytes(),i.toRawBytes(),t)}catch(e){}return{hashable:c,finish:e=>null!=l&&!(!a&&i.isSmallOrder())&&(e=C(e),o.add(i.mul(e,!1)).add(l.negate()).clearCofactor().is0())}})(e,n,t,r))}async function Ke(e,t){var t=we.fromHex(t),n=A.randomBytes(32),r=et(await Ve(n)),n=await B(n),t=t.multiply(r),r=await je(t.toRawBytes());return t=e,r=(e=r).substring(0,32),e=e.substring(32,96),r=V(r),t=(e=>{var t,n,r,a,i,o,s,l,c,d,u,h=(e=F(e)).length,f=new Uint8Array(1);for(window.crypto.getRandomValues(f),d=33+(127&f[0]),c=new Uint8Array(d),window.crypto.getRandomValues(c),h=(f=(s=3+d)+h)+(o=32-f%32),l=new Uint8Array(h),r=a=0,i=e.length;a<i;r=++a)t=e[r],l[r+s]=t;for(u=0,r=32;r--;)u+=c[r],l[r]=c[r];for(l[2+d]=o,r=0,n=h-1;r<o;)l[n-r]=c[r],r++;for(r=32;r<d;)c[r+1]+=u===256*c[r]+c[r+1],u+=c[r],l[r]=c[r],r++;return l[d]=u>>8,l[1+d]=u%256,l[d]===l[d-1]&&l[1+d]===2*l[d]&&(l[d-1]++,l[d]=++u>>8,l[1+d]=u%256),l})(t),e=await Xe(e),r=await Ze.encrypt({name:"AES-CBC",iv:r},e,t),e=await Ge(r),{referencePointHex:Ge(n),encryptedContentHex:e}}async function Je(e,t){var n=e.referencePointHex||e.referencePoint,e=e.encryptedContentHex||e.encryptedContent;if(null==n||null==e)throw new Error("Invalid secrets Object!");return t=V(t),t=et(await Ve(t)),n=we.fromHex(n).multiply(t),(async(e,t)=>{for(var n,r,a,i,o=t.substring(0,32),t=t.substring(32,96),o=V(o),e=V(e),t=await Xe(t),o=await Ze.decrypt({name:"AES-CBC",iv:o},t,e),s=new Uint8Array(o),l=(e=160<(t=s.length)?160:t)+1,c=0,d=32;d--;)c+=s[d];for(d=32;d<l;){if(c===256*s[d]+s[d+1]){i=d+3,a=s[d+2];break}c+=s[d],d++}if(e<d)throw new Error("Unsalt: No valid prefix ending found!");for(n=t-1,r=d=0;d<a;)r+=s[d]!==s[n-d],d++;if(r)throw new Error("Unsalt: Postfix and prefix did not match as expected!");return e=s=s.slice(i,n=t-a),Me.decode(e)})(e,await je(n.toRawBytes()))}async function Qe(e,t,n=""){for(var r,a,i,o,e=V(e),e=et(await Ve(e)),s=we.fromHex(t).multiply(e).toRawBytes(),l=F(n),c=new Uint8Array(s.length+l.length),d=a=0,u=s.length;a<u;d=++a)r=s[d],c[d]=r;for(d=i=0,o=l.length;i<o;d=++i)r=l[d],c[s.length+d]=r;return je(c)}qe=new TextEncoder("utf-8"),Me=new TextDecoder("utf-8"),ye=new Array(256).fill(0),He=ye.map(function(e,t){return t.toString(16).padStart(2,"0")}),ye.map(function(e,t){return BigInt(t)}),ye=Array.from("0123456789abcdef"),Pe=new Array(256),ye.forEach(function(e){return Pe[e]=16*parseInt(e,16)}),De=new Array(256),ye.forEach(function(e){return De[e]=parseInt(e,16)});var z,F=function(e){return qe.encode(e)},Ge=function(e){for(var t,n,r="",a=0,i=(n=new Uint8Array(e)).length;a<i;a++)t=n[a],r+=He[t];return r},Ze=window.crypto.subtle,Ye=BigInt(2)**BigInt(252)+BigInt("27742317777372353535851937790883648493"),Xe=async function(e){e=V(e);return Ze.importKey("raw",e,{name:"AES-CBC"},!1,["decrypt","encrypt"])},et=function(e){var o;return(o=e.slice(0,32))[0]&=248,o[31]&=127,o[31]|=64,e=(e=>{for(var t,n,r=0n,a=n=0,i=(e=new Uint8Array(o)).length;n<i;a=++n)t=e[a],r+=BigInt(t)<<8n*BigInt(a);return r})(),tt(e)},tt=function(e,t=Ye){return 0n<=(e=e%t)?e:e+t},nt=async function(e){e="string"==typeof e?F(e):e,e=await Ze.digest("SHA-256",e);return Ge(e)},rt=ze,at=Fe,it=We,ot=U(426),st=class{constructor(e){this.key=e.secretKeyHex,this.id=e.publicKeyHex,this.ctx=e.context,null==this.ctx&&(this.ctx="standard ThingyCryptoNode")}async sign(e){return at(e,this.key)}async verify(e,t){return it(e,this.id,t)}async encrypt(e){return Ke(e,this.id)}async decrypt(e){return Je(e,this.key)}async diffieHellmanFor(e,t,n){t=`${t}:${this.ctx}_`+n;return Qe(this.key,e,t)}},lt=-32023;function ct(e){var t;if(e!==(t=(t=Date.now())-t%bt)&&e!==(t-=bt)&&e!==(t+=36e4))throw new Error("Invalid Timestamp!")}function dt(){var e;return(e=Date.now())-e%bt}function ut(e,t){return t="string"!=typeof t?JSON.stringify(t):t,nt(e+t)}(z=new Map).set(-32700,{message:"JSON Parse Error!"}),z.set(-32600,{message:"Request is invalid thingy-rpc!"}),z.set(-32601,{message:"Method not found!"}),z.set(lt,{message:"Authentication failed!"}),z.set(-32002,{message:"No free ressources available on the server!"}),z.set(-32602,{message:"Invalid params provided!"}),z.set(-32032,{message:"Execution error!"});var ht,ft,mt,pt,gt,vt,yt=class extends Error{constructor(e){super(e),this.name="NetworkError"}},wt=class extends Error{constructor(e){super(e),this.name="ResponseAuthError"}},It=class extends Error{constructor(e,t){super(`${e}: (${e=t.code}) ${z.get(e).message} (${t.message})`),this.rpcCode=e,this.name="RPCError"}},bt=18e4,Et=function(){var e=Math.random();return Math.round(1e6*e)},St=async function(e,t){var n,r,a,i,t={method:"POST",credentials:"omit",body:t,headers:{"Content-Type":"application/json"}};try{return await(a=await fetch(e,t)).json()}catch(e){t=e,n="Error! RPC could not receive a JSON response!",i="No http-status could be provided!";try{i="HTTP-Status: "+a.status}catch(e){throw r=`No response could be retrieved!
Message: ${t.message}
Cause: `+t.cause,new yt(n+` 
${i} 
`+r)}throw r=`${i} 
Message: ${t.message} 
Cause: `+t.cause,new yt(n+` 
`+r)}},Ct=function(e){e.requestId=++e.requestId%1e7},kt=async function(e,t,n,r){var a,i,o;if(Ct(r),i=await r.getPublicKey(),a=r.requestId,n={auth:{type:n,clientId:i,name:r.name,requestId:a,timestamp:dt(),signature:""},func:e,args:t},r.requestingNodeId||(o=await r.getServerId()),i=JSON.stringify(n),t=await Fe(i,r.secretKeyHex),i=i.replace('"signature":""','"signature":"'+t+'"'),(n=await St(r.serverURL,i)).error)throw new It(e,n.error);return r.requestingNodeId&&(o=n.result.nodeId),await qt(n,a,o),n.result},xt=async function(e,t,n){e=JSON.stringify({auth:null,func:e,args:t});if((t=await St(n.serverURL,e)).error)throw new It(t.error);return t.result},_t=async function(e,t,n){if(Ct(n),e={auth:{type:"anonymous",requestId:n.requestId,timestamp:dt(),requestToken:n.anonymousToken},func:e,args:t},t=JSON.stringify(e),(e=await St(n.serverURL,t)).error)throw new It(e.error);return e.result},Nt=async function(e,t,n){var r,a;if(Ct(n),r=n.requestId,e={auth:{type:"publicAccess",clientId:await n.getPublicKey(),requestId:r,timestamp:dt(),requestToken:n.publicToken},func:e,args:t},t=JSON.stringify(e),n.requestingNodeId||(a=await n.getServerId()),(e=await St(n.serverURL,t)).error)throw new It(e.error);return n.requestingNodeId&&(a=e.result.nodeId),Pt(e,r,a),e.result},Bt=async function(e,t,n){var r,a;if(await Ot(n),Ct(n),a=await n.getPublicKey(),r=n.requestId,a={auth:{type:"tokenSimple",clientId:a,name:n.name,requestId:r,timestamp:dt(),requestToken:n.sessions[0].token},func:e,args:t},t=JSON.stringify(a),a=await n.getServerId(),(t=await St(n.serverURL,t)).error)throw null!=t.error.code&&t.error.code===lt&&(n.sessions[0]=null),new It(e,t.error);return await Pt(t,r,a),t.result},Lt=async function(e,t,n){throw new Error("doTokenUniqueRPC: Not Implemented yet!")},At=async function(e,t,n){var r,a,i;if(await Mt(n),Ct(n),i=n.sessions[2],a=await n.getPublicKey(),r=n.requestId,a={auth:{type:"authCodeSHA2",clientId:a,name:n.name,requestId:r,timestamp:dt(),requestAuthCode:""},func:e,args:t},t=await n.getServerId(),a=JSON.stringify(a),i=await ut(i.seedHex,a),a=a.replace('"requestAuthCode":""','"requestAuthCode":"'+i+'"'),(i=await St(n.serverURL,a)).error)throw null!=i.error.code&&i.error.code===lt&&(n.sessions[2]=null),new It(e,i.error);return await Ht(i,r,t,n),i.result},Tt=async function(e,t){var n;Ct(t),n={type:e,name:t.name};try{return await t.doRPC("startSession",n,"clientSignature")}catch(e){throw new Error("Explicit Start failed: "+e.message)}},Ot=async function(e){var t;if(null==e.sessions[0]||null==e.sessions[0].token)try{(t={}).token=await Dt(e),e.sessions[0]=t}catch(e){throw t="Could not establish a simple Token session! Details: "+e.message,new Error(t)}},Rt=async function(e,t){var n=t.serverContext;return Qe(t.secretKeyHex,t.serverId,t.name+`:${n}_`+e)},Dt=function(e){return Tt("tokenSimple",e)},Mt=async function(e){var t,n;if(null==e.sessions[2]||null==e.sessions[2].seedHex)try{t={},n=await Tt("authCodeSHA2",e),t.seedHex=await Rt(n,e),e.sessions[2]=t}catch(e){throw n="Could not establish an authCode with SHA2 session! Details: "+e.message,new Error(n)}},qt=async function(e,t,n){var r,a,i,o,s;try{if(o=e.auth.signature,s=e.auth.timestamp,r=e.auth.requestId,i=e.auth.serverId,null==o)throw new Error("No Signature!");if(null==s)throw new Error("No Timestamp!");if(null==r)throw new Error("No RequestId!");if(null==i)throw new Error("No ServerId!");if(r!==t)throw new Error("RequestId Mismatch!");if(i!==n)throw new Error("ServerId Mismatch!");if(ct(s),e.auth.signature="",a=JSON.stringify(e),!await We(o,i,a))throw new Error("Invalid Signature!")}catch(e){throw new wt(e.message)}},Pt=function(e,t,n){var r,a,i;try{if(i=e.auth.timestamp,r=e.auth.requestId,a=e.auth.serverId,null==i)throw new Error("No Timestamp!");if(null==r)throw new Error("No RequestId!");if(null==a)throw new Error("No ServerId!");if(r!==t)throw new Error("RequestId Mismatch!");if(a!==n)throw new Error("ServerId Mismatch!");ct(i)}catch(e){throw new wt(e.message)}},Ht=async function(e,t,n,r){var a,i,o,s,l,c;try{if(i=e.auth.responseAuthCode,c=e.auth.timestamp,a=e.auth.requestId,s=e.auth.serverId,null==i)throw new Error("No ResponseAuthCode!");if(null==c)throw new Error("No Timestamp!");if(null==a)throw new Error("No RequestId!");if(null==s)throw new Error("No ServerId!");if(a!==t)throw new Error("RequestId Mismatch!");if(s!==n)throw new Error("ServerId Mismatch!");if(ct(c),null==(l=r.sessions[2])||null==l.seedHex)throw new Error("Local session object has become invalid!");if(e.auth.responseAuthCode="",o=JSON.stringify(e),await ut(l.seedHex,o)!==i)throw new Error("AuthCodes did not Match!")}catch(e){throw new wt("authenticateServiceAuthCodeSHA2: "+e.message)}},Ut=class extends class{constructor(e){this.serverURL=e.serverURL,this.serverId=e.serverId,this.serverContext="thingy-rpc-post-connection",this.secretKeyHex=e.secretKeyHex,this.publicKeyHex=e.publicKeyHex,this.name="rpc-client"+Et(),this.requestId=0,this.sessions=new Array(4),this.anonymousToken=null,(this.publicToken=null)!=e.anonymousToken&&(this.anonymousToken=e.anonymousToken),null!=e.publicToken&&(this.publicToken=e.publicToken),null!=e.name&&(this.name=e.name),null!=e.serverContext&&(this.serverContext=e.serverContext)}updateServer(e,t,n){this.serverURL=e,this.serverId=t,this.serverContext=n,this.requestId=0,this.sessionInfo={}}updateKeys(e,t){this.secretKeyHex=e,this.publicKeyHex=t,this.requestId=0,this.sessionInfo={}}getServerURL(){return this.serverURL}async getServerId(){return null==this.serverId&&await this.requestNodeId("none"),this.serverId}getSecretKey(){return this.secretKeyHex}async getPublicKey(){return null==this.publicKeyHex&&(this.publicKeyHex=await rt(this.secretKeyHex)),this.publicKeyHex}doRPC(e,t,n){if(this.requestingNodeId&&"getNodeId"!==e)throw new Error("Cannot do regular RPCs while requesting NodeId!");switch(n){case"none":return xt(e,t,this);case"anonymous":return _t(e,t,this);case"publicAccess":return Nt(e,t,this);case"tokenSimple":return Bt(e,t,this);case"tokenUnique":return Lt(e,t,this);case"authCodeSHA2":return At(e,t,this);case"signature":case"clientSignature":case"masterSignature":return kt(e,t,n,this);default:throw new Error(`doRPC: Unknown authType! '${n}'`)}}async requestNodeId(e){var t,n;if(this.requestingNodeId)throw new Error("Request for nodeId already pending!");if("tokenSimple"===e||"tokenUnique"===e||"authCodeSHA2"===e)throw new Error("Requesting nodeId inside session - don't do this!");this.requestingNodeId=!0,t={};try{n=await this.doRPC("getNodeId",t,e),this.serverId=n.nodeId}finally{this.requestingNodeId=!1}}}{constructor(e){super(e)}addClient(e){return this.doRPC("addClientToServe",{clientPublicKey:e},"masterSignature")}removeClient(e){return this.doRPC("removeClientToServe",{clientPublicKey:e},"masterSignature")}getClients(){return this.doRPC("getClientsToServe",{},"masterSignature")}async getServerId(){return null==super.serverId&&await this.requestNodeId("masterSignature"),super.getServerId()}},$t=({log:ft,olog:mt}=j("messageboxmodule"),pt=5e3,ht=null,function(){var e;ft("messageboxmodule.initialize"),null!=(e=allModules.configmodule).messageboxStayDurationMS&&(pt=e.messageboxStayDurationMS)}),jt=function(){ft("letDisappear"),null!=ht&&clearTimeout(ht),ht=setTimeout(Vt,pt)},Vt=function(){ft("disappear"),messagebox.textContent="",messagebox.className="gone",ht=null},zt=function(e){ft("messageboxmodule.info"),"string"==typeof e&&(messagebox.textContent=e,messagebox.className="",jt())},W=function(e){ft("messageboxmodule.error"),"string"==typeof e&&(messagebox.textContent=e,messagebox.className="error",jt())};async function Ft(){Q||(yn()?((J=history.state).navAction=pn(),K.lastNavAction=J.navAction,In(K),history.replaceState(J,"")):(tn.navAction=en,K.lastNavAction=tn.navAction,In(K),history.replaceState(tn,"")),await sn(),J=history.state,bn(J),an(J))}({log:gt,olog:vt}=j("utilsmodule"));var Wt,Kt,Jt=function(e){if(null==e)throw new Error("add0x - undefined argument!");return"0"===e[0]&&"x"===e[1]?e:"0x"+e},Qt=function(e){if(null==e)throw new Error("strip0x - undefined argument!");return"0"!==e[0]||"x"!==e[1]?e:e.slice(2)},Gt=async function(e){var e=await je(e),t=2*parseInt(e[0],16);return e.substr(t,64)},Zt=function(e){var t,n,r;if(null!=e){if(64!==(e=Qt(e)).length)return!1;for(n=0,r=e.length;n<r;n++)if(t=e[n],NaN===parseInt(t,16))return!1;return!0}},Yt=function(e){for(;e.hasChildNodes();)e.removeChild(e.firstChild)},Xt=async function(e){var t;try{return await navigator.clipboard.writeText(e),gt("Clipboard API succeeded"),void(null!=be&&zt("Copied: "+e))}catch(e){gt(e)}(t=document.createElement("textarea")).value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-99999px",document.body.appendChild(t),document.getSelection().removeAllRanges(),t.select(),t.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(t),null!=be&&zt("Copied: "+e)},en={action:"pageload",timestamp:Date.now()},K={lastNavAction:en},J={},tn={base:"RootState",modifier:"none",context:null,depth:0,navAction:null},nn=null,rn=null,Q=!0,an=function(){},G=function(){},on=function(e){var t;if(!yn())return Ft();J=history.state,t=hn(K.lastNavAction),J.navAction=t?K.lastNavAction:pn(),history.replaceState(J,""),bn(J),t?mn():"VOID"!==J.base&&G(J)},sn=async function(){if("VOID"===J.base)try{Q=!0,await Z(1)}finally{Q=!1}},ln=function(e,t,n,r){J.base=e,J.modifier=t,J.context=n||null,J.navAction=r},cn=function(e,t,n){var r=gn();ln(e,t,n,r),J.depth=J.depth+1,K.lastNavAction=r,In(K),history.pushState(J,""),bn(J)},dn=function(e,t,n){var r=gn();ln(e,t,n,r),K.lastNavAction=r,In(K),history.replaceState(J,""),bn(J)},Z=function(e){var t;if(null==nn&&!(0===J.depth||e>J.depth))return t=vn(),K.lastNavAction=t,In(K),t=fn(t),history.go(-e),t},un=async function(){await Z(J.depth),cn("VOID","none"),await Z(1)},hn=function(e){return"back"===e.action&&e.timestamp===rn},fn=function(e){return rn=e.timestamp,new Promise(function(e){return nn=e})},mn=function(){nn(),rn=nn=null},pn=function(){return{action:"browserNav {refresh, back or forward}",timestamp:Date.now()}},gn=function(){return{action:"nav",timestamp:Date.now()}},vn=function(){return{action:"back",timestamp:Date.now()}},yn=function(){return wn(history.state)},wn=function(e){var t,n,r,a,i;if(null==e)return!1;if(a=Object.keys(e),i=Object.keys(tn),a.length!==i.length)return!1;for(n=t=0,r=a.length;t<r;n=++t)if(a[n]!==i[n])return!1;return!0},In=function(e){return sessionStorage.setItem("NAV_info",JSON.stringify(e))},bn=function(e){},En=async function(e,t,n){var r;if(!Q){if(J.modifier,r=J.depth,"string"!=typeof e)throw new Error("In navhandler.toBase `newBase` must a string!");if("number"!=typeof n)throw new Error("Depth must be specified, and be a number!");if(0===n)throw new Error("Depth cannot be 0!");if(n===r+1)return(async(e,t)=>{var n,r;if(!Q){if("string"!=typeof e)throw new Error("In navhandler.toBase `newBase` must a string!");if(await sn(),n=J.base,r=J.modifier,n!==e)"none"===r?cn(e,r,t):dn(e,"none",t);else if("none"===r)dn(e,"none",t);else try{Q=!0,await Z(1),dn(e,"none",t)}finally{Q=!1}G(J)}})(e,t);if(r<n)throw new Error("Our current depth is before the the newly specified depth. We don't dare to jump unto the unknown future!");r=r-n+1;try{Q=!0,await Z(r),cn(e,"none",t)}finally{Q=!1}G(J)}};function Sn(){En("display-servers",null,1)}function Cn(e){En("edit-server",e,2)}({log:Wt,olog:Kt}=j("navtriggers")),{log:X,olog:Tn}=j("masterkeymodule"),Y=null,_n="Auth Master UI",Nn=kn=Bn=Ln=On=ee=te="",xn=new Map;var kn,xn,_n,Y,Nn,Bn,Ln,X,An,ee,te,Tn,On,ne,re,Rn,Dn,Mn,qn,Pn,Hn=function(){X("initialize"),floatingSecretInput.addEventListener("change",Fn),floatingSecretInput.addEventListener("keyup",jn),aliasInput.addEventListener("change",Wn),aliasInput.addEventListener("keyup",Vn),aliasInput.addEventListener("keydown",zn),acceptUseButton.addEventListener("click",$n),masterkeydisplay.addEventListener("click",Un)},Un=function(){X("keyDisplayClicked"),content.className="set-master-key"},$n=function(){X("acceptButtonClicked"),Sn()},jn=function(){X("floatingSecretKeyUpped"),Bn===floatingSecretInput.value?floatingSecretInput.className=Ln:floatingSecretInput.className="typing"},Vn=function(){X("aliasKeyUpped"),Nn===aliasInput.value?aliasInput.className=kn:aliasInput.className="typing"},zn=function(e){"Enter"===e.key&&$n()},Fn=async function(){X("floatingSecretChanged"),floatingSecretInput.className="okay",Ln="okay",An=await Gt(Bn=floatingSecretInput.value),te=await ze(An),On=await nt(_n+"_"+te),Y=new st({secretKeyHex:An,publicKeyHex:te,context:_n}),await rr(On),ee=ar(te),Kn(),Jn(),aliasInput.focus()},Wn=function(){var t;X("aliasChanged"),Nn=aliasInput.value,ee=Nn;try{or(ee,te),aliasInput.className="okay",kn="okay"}catch(e){X(t=e),W(t.message),aliasInput.className="error",kn="error"}Jn()},Kn=function(){var e;X("activateAndFillBottomGroup"),null!=(e=document.getElementsByClassName("passive")[0])&&e.classList.remove("passive"),keyIdDisplay.innerHTML="0x"+te,storageIdDisplay.innerHTML=""+On,ee?aliasInput.value=ee:(aliasInput.setAttribute("placeholder","Define Alias"),aliasInput.value="")},Jn=function(){X("updateMasterKeyHeadline"),masterkeyAlias.innerHTML=ee,masterkeyId.innerHTML="0x"+te,masterkeyStorageId.innerHTML=On},Qn=function(){return null!=Y},Gn=function(e){return Y.encrypt(e)},Zn=function(e){return Y.decrypt(e)},Yn=function(e,t){var n,r,a,i=t+":"+(e+="/thingy-post-rpc");return null==(n=xn.get(i))&&(a=Y.key,r=Y.id,Tn(e={serverURL:e,serverId:t,secretKeyHex:a,publicKeyHex:r}),n=new Ut(e),xn.set(i,n)),n},Xn=function(){return On},er=function(){floatingSecretInput.focus()},tr=({log:Rn,olog:Dn}=j("aliasmodule"),Mn="",ne={},re={},function(){Rn("initialize")}),nr=async function(){var e;Rn("saveAliases"),e=await Gn(JSON.stringify(ne)),ot.save(Mn,e,!0)},rr=async function(e){var t,n;if(Rn("loadForStorageId"),Rn(Mn=e+"_aliases"),e=ot.load(Mn),Dn({encrypted:e}),null==e||null==e.referencePointHex)ne={},re={};else{for(t in ne=JSON.parse(await Zn(e)),Dn({aliasToId:ne}),ne)n=ne[t],re[n]=t;Dn({idsToAlias:re})}},ar=function(e){return re[e]},ir=function(e){return ne[e]},or=function(e,t){var n;if(Rn("setAliasForId"),ne[e]!==t){if(null!=ne[e])throw new Error("Alias is already used!");n=re[t],ne[n]===t&&delete ne[n],ne[e]=t,re[t]=e,nr()}},sr=({log:qn,olog:Pn}=j("contentmodule"),function(){qn("setToNoMasterkeyState"),content.className="set-master-key"}),lr=function(){qn("setToDisplayServerState"),content.className="display-servers"},cr=function(){qn("setToEditServerState"),content.className="edit-server"},dr=function(){qn("setToManageClientsState"),content.className="manage-clients"},ur=Object.prototype.toString,hr=Array.isArray||function(e){return"[object Array]"===ur.call(e)};function fr(e){return"function"==typeof e}function mr(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function pr(e,t){return null!=e&&"object"==typeof e&&t in e}var gr=RegExp.prototype.test,vr=/\S/,yr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},wr=/\s*/,Ir=/\s+/,br=/\s*=/,Er=/\s*\}/,Sr=/#|\^|\/|>|\{|&|=|!/;function Cr(e){this.string=e,this.tail=e,this.pos=0}function kr(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function ae(){this.templateCache={_cache:{},set:function(e,t){this._cache[e]=t},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}Cr.prototype.eos=function(){return""===this.tail},Cr.prototype.scan=function(e){var e=this.tail.match(e);return e&&0===e.index?(e=e[0],this.tail=this.tail.substring(e.length),this.pos+=e.length,e):""},Cr.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=t.length,t},kr.prototype.push=function(e){return new kr(e,this)},kr.prototype.lookup=function(e){var t,n,r,a=this.cache;if(a.hasOwnProperty(e))t=a[e];else{for(var i,o,s,l=this,c=!1;l;){if(0<e.indexOf("."))for(i=l.view,o=e.split("."),s=0;null!=i&&s<o.length;)s===o.length-1&&(c=pr(i,o[s])||(n=i,r=o[s],null!=n&&"object"!=typeof n&&n.hasOwnProperty&&n.hasOwnProperty(r))),i=i[o[s++]];else i=l.view[e],c=pr(l.view,e);if(c){t=i;break}l=l.parent}a[e]=t}return t=fr(t)?t.call(this.view):t},ae.prototype.clearCache=function(){void 0!==this.templateCache&&this.templateCache.clear()},ae.prototype.parse=function(e,A){var t=this.templateCache,n=e+":"+(A||oe.tags).join(":"),r=void 0!==t,a=r?t.get(n):void 0;return null==a&&(a=(e=>{if(!e)return[];var t,n,r,a,i=!1,o=[],s=[],l=[],c=!1,d=!1,u="",h=0;function f(){if(c&&!d)for(;l.length;)delete s[l.pop()];else l=[];d=c=!1}function m(e){if("string"==typeof e&&(e=e.split(Ir,2)),!hr(e)||2!==e.length)throw new Error("Invalid tags: "+e);t=new RegExp(mr(e[0])+"\\s*"),n=new RegExp("\\s*"+mr(e[1])),r=new RegExp("\\s*"+mr("}"+e[1]))}m(A||oe.tags);for(var p,g,v,y,w,I,b=new Cr(e);!b.eos();){if(p=b.pos,v=b.scanUntil(t))for(var E=0,S=v.length;E<S;++E)a=y=v.charAt(E),gr.call(vr,a)?(i=d=!0,u+=" "):(l.push(s.length),u+=y),s.push(["text",y,p,p+1]),p+=1,"\n"===y&&(f(),u="",h=0,i=!1);if(!b.scan(t))break;if(c=!0,g=b.scan(Sr)||"name",b.scan(wr),"="===g?(v=b.scanUntil(br),b.scan(br),b.scanUntil(n)):"{"===g?(v=b.scanUntil(r),b.scan(Er),b.scanUntil(n),g="&"):v=b.scanUntil(n),!b.scan(n))throw new Error("Unclosed tag at "+b.pos);if(w=">"==g?[g,v,p,b.pos,u,h,i]:[g,v,p,b.pos],h++,s.push(w),"#"===g||"^"===g)o.push(w);else if("/"===g){if(!(I=o.pop()))throw new Error('Unopened section "'+v+'" at '+p);if(I[1]!==v)throw new Error('Unclosed section "'+I[1]+'" at '+p)}else"name"===g||"{"===g||"&"===g?d=!0:"="===g&&m(v)}if(f(),I=o.pop())throw new Error('Unclosed section "'+I[1]+'" at '+b.pos);for(var C,k=(e=>{for(var t,n,r=[],a=0,i=e.length;a<i;++a)(t=e[a])&&("text"===t[0]&&n&&"text"===n[0]?(n[1]+=t[1],n[3]=t[3]):(r.push(t),n=t));return r})(s),x=[],_=x,N=[],B=0,L=k.length;B<L;++B)switch((C=k[B])[0]){case"#":case"^":_.push(C),N.push(C),_=C[4]=[];break;case"/":N.pop()[5]=C[2],_=0<N.length?N[N.length-1][4]:x;break;default:_.push(C)}return x})(e),r)&&t.set(n,a),a},ae.prototype.render=function(e,t,n,r){var a=this.getConfigTags(r),a=this.parse(e,a),t=t instanceof kr?t:new kr(t,void 0);return this.renderTokens(a,t,n,e,r)},ae.prototype.renderTokens=function(e,t,n,r,a){for(var i,o,s,l="",c=0,d=e.length;c<d;++c)s=void 0,"#"===(o=(i=e[c])[0])?s=this.renderSection(i,t,n,r,a):"^"===o?s=this.renderInverted(i,t,n,r,a):">"===o?s=this.renderPartial(i,t,n,a):"&"===o?s=this.unescapedValue(i,t):"name"===o?s=this.escapedValue(i,t,a):"text"===o&&(s=this.rawValue(i)),void 0!==s&&(l+=s);return l},ae.prototype.renderSection=function(e,t,n,r,a){var i=this,o="",s=t.lookup(e[1]);if(s){if(hr(s))for(var l=0,c=s.length;l<c;++l)o+=this.renderTokens(e[4],t.push(s[l]),n,r,a);else if("object"==typeof s||"string"==typeof s||"number"==typeof s)o+=this.renderTokens(e[4],t.push(s),n,r,a);else if(fr(s)){if("string"!=typeof r)throw new Error("Cannot use higher-order sections without the original template");null!=(s=s.call(t.view,r.slice(e[3],e[5]),function(e){return i.render(e,t,n,a)}))&&(o+=s)}else o+=this.renderTokens(e[4],t,n,r,a);return o}},ae.prototype.renderInverted=function(e,t,n,r,a){var i=t.lookup(e[1]);if(!i||hr(i)&&0===i.length)return this.renderTokens(e[4],t,n,r,a)},ae.prototype.indentPartial=function(e,t,n){for(var r=t.replace(/[^ \t]/g,""),a=e.split("\n"),i=0;i<a.length;i++)a[i].length&&(0<i||!n)&&(a[i]=r+a[i]);return a.join("\n")},ae.prototype.renderPartial=function(e,t,n,r){if(n){var a,i,o,s=this.getConfigTags(r),l=fr(n)?n(e[1]):n[e[1]];if(null!=l)return a=e[6],i=e[4],o=l,0==e[5]&&i&&(o=this.indentPartial(l,i,a)),e=this.parse(o,s),this.renderTokens(e,t,n,o,r)}},ae.prototype.unescapedValue=function(e,t){t=t.lookup(e[1]);if(null!=t)return t},ae.prototype.escapedValue=function(e,t,n){n=this.getConfigEscape(n)||oe.escape,t=t.lookup(e[1]);if(null!=t)return("number"==typeof t&&n===oe.escape?String:n)(t)},ae.prototype.rawValue=function(e){return e[1]},ae.prototype.getConfigTags=function(e){return hr(e)?e:e&&"object"==typeof e?e.tags:void 0},ae.prototype.getConfigEscape=function(e){return e&&"object"==typeof e&&!hr(e)?e.escape:void 0};var ie,xr,oe={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(e){_r.templateCache=e},get templateCache(){return _r.templateCache}},_r=new ae;oe.clearCache=function(){return _r.clearCache()},oe.parse=function(e,t){return _r.parse(e,t)},oe.render=function(e,t,n,r){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+(hr(a=e)?"array":typeof a)+'" was given as the first argument for mustache#render(template, view, partials)');var a;return _r.render(e,t,n,r)},oe.escape=function(e){return String(e).replace(/[&<>"'`=\/]/g,function(e){return yr[e]})},oe.Scanner=Cr,oe.Context=kr,oe.Writer=ae;let O=oe;({log:ie,olog:xr}=j("servermodule"));var Nr,Br,Lr,Ar,Tr,Or,se,Rr,Dr,Mr,qr,Pr,Hr=document.getElementById("server-entry-template-element").outerHTML,Ur=document.getElementById("no-server-indication"),$r="",le=[],jr=null,Vr="",zr="",ce="",de="",ue="",Fr="",Wr="https://",Kr=null,Jr=function(){ie("initialize"),serverNameInput.addEventListener("change",Qr),serverNameInput.addEventListener("keyup",Gr),serverUrlInput.addEventListener("change",Zr),serverUrlInput.addEventListener("keyup",Yr),serverIdInput.addEventListener("change",Xr),serverIdInput.addEventListener("keyup",ea),statedServerIdDisplay.addEventListener("click",ta),addserverbutton.addEventListener("click",sa),cancelEditButton.addEventListener("click",oa),acceptEditButton.addEventListener("click",ia)},Qr=function(){ie("serverNameChanged"),Vr=serverNameInput.value,zr=0<Vr.length?"okay":"",serverNameInput.className=zr},Gr=function(){ie("serverNameKeyUpped"),Vr===serverNameInput.value?serverNameInput.className=zr:serverNameInput.className="typing"},Zr=async function(){var e,t,n,r,a,i,o;if(ie("serverUrlChanged"),0===(ce=serverUrlInput.value).length)de="";else{if(ce.length<=8){for(n=!0,t=r=0,a=ce.length;r<a;t=++r)ce[t]!==Wr[t]&&(n=!1);if(n)return de="",serverUrlInput.className=de,void ca()}0!==ce.indexOf(Wr)&&(ce=Wr+ce,serverUrlInput.value=ce),i=!1,o="";try{o=await(Kr=Yn(ce)).getServerId(),i=!0,ie("Retrieved ServerId "+o)}catch(t){ie("received error: "+(e=t).message),e.rpcCode===lt?ua("You are no Master of this Server!"):ua(e.message)}null!=Kr&&null!=Kr.serverId&&(statedServerIdDisplay.textContent=Kr.serverId),de=i?(statedServerIdDisplay.innerHTML=o,"okay"):"error",ca()}serverUrlInput.className=de},Yr=function(){ie("serverUrlKeyUpped"),ce===serverUrlInput.value?serverUrlInput.className=de:serverUrlInput.className="typing"},Xr=function(){var t;if(ie("serverIdChanged"),0===(ue=serverIdInput.value).length)Fr="";else try{if(ue.length<64)throw new Error("Invalid Id!");if(!Zt(ue))throw new Error("Invalid Id!");Fr="okay",ca()}catch(e){ie(t=e),W(t.message),Fr="error"}serverIdInput.className=Fr},ea=function(){ie("serverIdKeyUpped"),ue===serverIdInput.value?serverIdInput.className=Fr:serverIdInput.className="typing"},ta=function(){var e;ie("statedServerIdDisplayClicked"),(e=statedServerIdDisplay.textContent)&&!serverIdInput.value&&(serverIdInput.value=e,Xr())},na=function(e){var t;ie("editButtonClicked"),t=this.parentNode.parentNode.parentElement.getAttribute("server-index"),ie(t),Cn({index:t})},ra=function(e){var t;ie("deleteButtonClicked"),t=this.parentNode.parentNode.parentElement.getAttribute("server-index"),ie(t),(async(e,t)=>{var n;if(!Q){if("string"!=typeof(e=null==e?"none":e))throw new Error("In navhandler.toMod `newMod` is not a string!");if(await sn(),n=J.modifier,"object"==typeof t?Object.assign(t,J.context):t=J.context,n!==e){if("none"===n&&"none"!==e)cn(J.base,e,t);else{if("none"===n||"none"!==e)return"none"===n||(dn(J.base,e,t),!G(J));try{Q=!0,await Z(1)}finally{Q=!1}}G(J)}}})("delete-confirmation",{index:t})},aa=function(e){var t;ie("manageButtonClicked"),t=this.parentNode.parentElement.getAttribute("server-index"),ie(t),En("manage-clients",{index:t},2)},ia=async function(){var e;ie("acceptEditButtonClicked"),null!=jr?((e=le[jr]).name=Vr,e.url=ce,e.id=ue,jr=null):(e={name:Vr,url:ce,id:ue},le.push(e)),await la(),ha(),Sn()},oa=function(){ie("cancelEditButtonClicked"),ha(),Sn()},sa=function(){ie("addServerButtonClicked"),Cn({})},la=async function(){var e;ie("saveServers"),e=await Gn(JSON.stringify(le)),ot.save($r,e,!0)},ca=function(){ie("checkAcceptable"),""!==de?acceptEditButton.classList.remove("passive"):acceptEditButton.classList.add("passive")},da=async function(e){ie("loadForStorageId"),ie($r=e+"_servers"),e=ot.load($r),xr({encrypted:e}),null!=e&&null!=e.referencePointHex?(le=JSON.parse(await Zn(e)),xr({servers:le})):Array.isArray(le)||(le=[])},ua=function(e){errorMessage.textContent=e,errorMessage.parentNode.classList.add("error")},ha=function(){ie("reset"),Vr="",serverNameInput.value="",zr="",ce=serverNameInput.className="",serverUrlInput.value="",de="",serverUrlInput.className="",statedServerIdDisplay.textContent="",ue="",serverIdInput.value="",Fr="",serverIdInput.className="",errorMessage.parentNode.className="",errorMessage.textContent="",acceptEditButton.classList.add("passive")},fa=function(){var e,t,n,r,a,i,o,s,l;for(ie("attachEventListeners"),t=serverList.getElementsByClassName("edit-button"),e=serverList.getElementsByClassName("delete-button"),l=serverList.getElementsByClassName("manage-button"),n=0,i=t.length;n<i;n++)t[n].addEventListener("click",na);for(r=0,o=e.length;r<o;r++)e[r].addEventListener("click",ra);for(a=0,s=l.length;a<s;a++)l[a].addEventListener("click",aa)},ma=async function(){var e,t,n,r,a;for(ie("display"),await da(Xn()),a="",Yt(serverList),e=t=0,n=le.length;t<n;e=++t)r=le[e],ie(e),xr(r),r={index:e,server:r},a+=O.render(Hr,r);0<a.length?(serverList.className="",serverList.innerHTML=a):(serverList.className="empty",serverList.appendChild(Ur)),fa()},pa=function(e){ie("setupEditData"),xr(e),ha(),null!=e.index&&(jr=e.index,e=le[jr],serverNameInput.value=e.name,Qr(),serverUrlInput.value=e.url,Zr(),serverIdInput.value=e.id,Xr())},ga=function(e){return le[e]},va=async function(e){le.splice(e,1),await la()},ya=({log:se,olog:Mr}=j("clientmanagermodule"),ye=document.getElementById("client-entry-template-element"),Ar=ye.outerHTML,ye=document.getElementById("no-clients-message"),Dr=ye.outerHTML,Tr=Lr=Br=Nr="",Or=[],function(){se("initialize"),clientAliasInput.addEventListener("change",Ia),clientAliasInput.addEventListener("keyup",ba),clientIdInput.addEventListener("change",Ea),clientIdInput.addEventListener("keyup",Sa),startAddButton.addEventListener("click",Ca),stopAddButton.addEventListener("click",ka),addClientButton.addEventListener("click",xa)}),wa=function(){var e,t,n;for(se("attachEventListeners"),t=0,n=(e=clientsToServeList.getElementsByClassName("delete-button")).length;t<n;t++)e[t].addEventListener("click",_a)},Ia=function(e){se("clientAliasChanged"),Nr=clientAliasInput.value,Lr=0<Nr.length?"okay":"",clientAliasInput.className=Lr},ba=function(e){se("clientAliasKeyUpped"),Nr===clientAliasInput.value?clientAliasInput.className=Lr:clientAliasInput.className="typing"},Ea=function(e){var t;if(se("clientIdChanged"),0===(Br=clientIdInput.value).length)Tr="";else try{if(Br.length<64)throw new Error("Invalid Id!");if(!Zt(Br))throw new Error("Invalid Id!");Tr="okay",Na()}catch(e){se(t=e),W(t.message),Tr="error",Ba()}clientIdInput.className=Tr},Sa=function(e){se("clientIdKeyUpped"),Br===clientIdInput.value?clientIdInput.className=Tr:(clientIdInput.className="typing",Ba())},Ca=function(){se("startAddButtonClicked"),clientmanager.classList.add("add-client"),clientAliasInput.focus()},ka=function(){se("stopAddButtonClicked"),clientmanager.classList.remove("add-client")},xa=async function(e){var t,n,r;se("addClientButtonClicked");try{t=clientIdInput.value,null!=(n=clientAliasInput.value)&&or(n,t),r=await Rr.addClient(t),Mr({reply:r}),zt("ADD appearently successful!"),La(),Aa()}catch(e){n="Error on trying to add a new client: "+e.message,se(n),W(n)}},_a=async function(e){var t,n;se("deleteButtonClicked"),t=this.parentNode.parentElement.getAttribute("client-index"),t=Or[t],Mr(t);try{n=await Rr.removeClient(t.id),Mr({reply:n}),zt("REMOVE appearently successful!"),La(),Aa()}catch(e){t="Error on trying to remove client: "+e.message,W(t),se(t)}},Na=function(){se("activateAddButton"),addClientButton.classList.remove("passive")},Ba=function(){se("deactivateAddButton"),addClientButton.classList.add("passive")},La=function(){se("resetAddFrame"),clientAliasInput.value="",clientAliasInput.className="",clientIdInput.value="",clientIdInput.className="",clientmanager.classList.remove("add-client")},Aa=async function(){var e,t,n,r,a,i,o,s,l,c;se("updateClients");try{for(clientmanager.classList.remove("error"),r=await Rr.getClients(),Mr({clientIds:r}),zt("GETCLIENTS appearently successful!"),Or=[],a="",s=i=0,l=r.length;i<l;s=++i)o=r[s],n={alias:e=null==(e=ar(o))?"Unnamed":e,id:o},Or.push(n),t={index:s,client:n},a+=O.render(Ar,t);0===(clientsToServeList.innerHTML=a).lengh&&(clientsToServeList.innerHTML=Dr),wa()}catch(e){c="Error on retrieveing clients to serve: "+e.message,se(c),W(c),clientmanager.classList.add("error")}},Ta=function(e){se("createMasterClientForServer"),Rr=Yn(e.url,e.id)},Oa=function(e){if(se("prepare"),null==e.index)throw new Error("Called prepare on clientmanagermodule without server Index!");e=ga(e.index),Ta(e),La(),Aa()};({log:qr,olog:Pr}=j("modalcore"));var he,Ra,Da,Ma,qa,Pa,Ha,Ua,$a,ja,Va,za,Fa,fe,Wa,Ka,Ja,me,Qa,Ga,Za=class{constructor(e){this.modalElement=e,this.modalPromise=null,this.rejectPromise=null,(this.acceptPromise=null)==this.modalElement&&(this.modalElement=null),this.accept=this.accept.bind(this),this.reject=this.reject.bind(this)}assignElement(e){return this.modalElement=e}connectDefaultElements(){var e=this,t=this.modalElement.getElementsByClassName("click-catcher")[0],n=this.modalElement.getElementsByClassName("modal-close-button")[0],r=this.modalElement.getElementsByClassName("modal-accept-button")[0],a=this.modalElement.getElementsByClassName("modal-cancel-button")[0];null!=t&&t.addEventListener("click",function(){return e.reject("click-catcher")}),null!=n&&n.addEventListener("click",function(){return e.reject("modal-close-button")}),null!=r&&r.addEventListener("click",function(){return e.accept("modal-accept-button")}),null!=a&&a.addEventListener("click",function(){return e.reject("modal-cancel-button")})}reject(e){var t;e=e||"Default Modal Reject",t=this.rejectPromise,this.rejectPromise=null,this.acceptPromise=null,this.modalPromise=null,this.modalElement.classList.remove("shown"),null!=t&&t(e)}accept(e){var t;e=e||"Default Modal Accept",t=this.acceptPromise,this.rejectPromise=null,this.acceptPromise=null,this.modalPromise=null,this.modalElement.classList.remove("shown"),null!=t&&t(e)}activate(){var n;null==this.modalPromise&&((n=this).modalPromise=new Promise(function(e,t){return n.rejectPromise=t,n.acceptPromise=e}),this.modalElement.classList.add("shown"))}},Ya=({log:Ra,olog:qa}=j("deleteconfirmation"),he=Rr=null,ye=document.getElementById("deleteconfirmation-content-message-template"),Ma=ye.innerHTML,Pa=!1,{log:$a,olog:ja}=j("uistatemodule"),Ua=Ha=Da=null),Xa={"no-masterkey":function(e){sr(e),er()},"display-servers":function(e){lr(e),ma(e)},"edit-server":function(e){cr(e),pa(e)},"manage-clients":function(e){dr(e),Oa(e)}},ei=function(){Ra("turnDownModal"),null==he.modalPromise||Pa||he.modalPromise.catch(function(){}),he.reject("uiState changed"),Pa=!1},ti={none:function(e){ei()},"delete-confirmation":function(e){ei();if(Ra("turnUpModal"),null==he.modalPromise){if(null==e.index)throw new Error("Deleteconfirmation called without index of server to delete!");e="string"==typeof(e=ga(e.index)).name&&0<e.name.length?`(${e.name})`:"",Da.innerHTML=O.render(Ma,{serverName:e}),Pa=!1,he.activate()}}},ni=function(e,t,n){$a("applyUIState"),Ya=n,null!=e&&ri(e),null!=t&&ai(t)},ri=function(e){var t;if($a("applyUIBaseState "+e),"function"!=typeof(t=Xa[e]))throw new Error(`on applyUIStateBase: base '${e}' apply function did not exist!`);Ha=e,t(Ya)},ai=function(e){var t;if($a("applyUIStateModifier "+e),t=ti[e],"function"!=typeof ai)throw new Error(`on applyUIStateModifier: modifier '${e}' apply function did not exist!`);Ua=e,t(Ya)},ii=function(){return Ua},oi=function(){return Ha},si=function(){return Ya},li="0.0.1",ci=["https://localhost:6969","https://localhost:6999"],di=0,ui=({log:fe,olog:Ja}=j("appcoremodule"),me=null,"undefined"!=typeof navigator&&null!==navigator&&null!=navigator.serviceWorker&&(me=navigator.serviceWorker),Fa=document.getElementById("current-version"),Ka=document.getElementById("new-version"),Wa=document.getElementById("menu-version"),Va="no-masterkey",za="none",function(){fe("initialize"),"function"==typeof hi&&(an=hi),"function"==typeof fi&&(G=fi),window.addEventListener("popstate",on),null==sessionStorage.getItem("NAV_info")&&In(K),K=JSON.parse(sessionStorage.getItem("NAV_info")),Q=!1,null!=Fa&&(Fa.textContent=li),null!=me&&(me.register("serviceworker.js",{scope:"/"}),null!=me.controller&&me.controller.postMessage(`App is version: ${li}!`),me.addEventListener("message",gi),me.addEventListener("controllerchange",vi))}),hi=function(e){if(fe("loadWithNavState"),Ja(e),!Qn()&&0!==e.depth)return(async e=>{if(!Q){try{Q=!0,null!=e&&e?await un():await Z(J.depth)}finally{Q=!1}G(J)}})(!0);fi(e)},fi=function(e){var t,n,r;fe("navStateUpdate"),t=e.base,r=e.modifier,n=e.context,ot.save("navState",e),mi(t,r,n)},mi=function(e,t,n){fe("setUIState"),"RootState"===e&&(e="no-masterkey",t="none"),pi(e,t,n),"delete-confirmation"===t&&yi(n)},pi=function(e,t,n){fe("setAppState"),fe((Va=e?e:Va)+":"+(za=t?t:za)),Ja(n),ni(Va,za,n)},gi=function(e){fe("  !  onServiceWorkerMessage"),"object"==typeof e.data&&null!=e.data.version&&(e=e.data.version)!==li&&(Ka.textContent=e,Wa.classList.add("to-update"))},vi=function(){me.controller.postMessage(`Hello I am version: ${li}!`),me.controller.postMessage("tellMeVersion")},yi=async function(e){fe("deleteConfirmationProcess");try{if(null==e.index)throw new Error("called deleteConfirmationProcess without server index to delete");Ra("userConfirmation"),null==he.modalPromise&&he.activate(),Pa=!0,await he.modalPromise,fe("user confirmed!"),await va(e.index),fe("server deleted!")}catch(e){fe(e)}finally{Sn()}},wi={servermodule:!0};function pe(e){var t=this;e="object"==typeof e?e:{},t.revision=3,t.imageTypes={bmp:"image/bmp",gif:"image/gif",jpeg:"image/jpeg",jpg:"image/jpg",png:"image/png","svg+xml":"image/svg+xml",tiff:"image/tiff",webp:"image/webp","x-icon":"image/x-icon"},t.toTable=e.toTable,t.domElement=t.toTable?document.createElement("div"):document.createElement("canvas"),t.url=e.url||"",t.size=e.size||280,t.qrc=!1,t.colorLight=e.colorLight||"#fff",t.colorDark=e.colorDark||"#000",t.ecclevel=e.ecclevel||1,t.noBorder=e.noBorder,t.borderSize=e.borderSize||4;function h(e,t){var n;for(C[e+v*t]=1,n=-2;n<2;n++)C[e+n+v*(t-2)]=1,C[e-2+v*(t+n+1)]=1,C[e+2+v*(t+n)]=1,C[e+n+1+v*(t+2)]=1;for(n=0;n<2;n++)N(e-1,t+n),N(e+1,t-n),N(e-n,t-1),N(e+n,t+1)}function f(e,t,n,r){for(var a,i,o=pe.gexp,s=pe.glog,l=0;l<r;l++)E[n+l]=0;for(l=0;l<t;l++){if(255!=(i=s[E[e+l]^E[n]]))for(a=1;a<r;a++)E[n+a-1]=E[n+a]^o[B(i+_[r-a])];else for(a=n;a<n+r;a++)E[a]=E[a+1];E[n+r-1]=255==i?0:o[B(i+_[0])]}}function m(e){var t,n,r,a;switch(e){case 0:for(n=0;n<v;n++)for(t=0;t<v;t++)t+n&1||L(t,n)||(C[t+n*v]^=1);break;case 1:for(n=0;n<v;n++)for(t=0;t<v;t++)1&n||L(t,n)||(C[t+n*v]^=1);break;case 2:for(n=0;n<v;n++)for(t=r=0;t<v;t++,r++)(r=3==r?0:r)||L(t,n)||(C[t+n*v]^=1);break;case 3:for(n=a=0;n<v;n++,a++)for(r=a=3==a?0:a,t=0;t<v;t++,r++)(r=3==r?0:r)||L(t,n)||(C[t+n*v]^=1);break;case 4:for(n=0;n<v;n++)for(a=n>>1&1,t=r=0;t<v;t++,r++)3==r&&(r=0,a=!a),a||L(t,n)||(C[t+n*v]^=1);break;case 5:for(n=a=0;n<v;n++,a++)for(3==a&&(a=0),t=r=0;t<v;t++,r++)(t&n&1)+!(!(r=3==r?0:r)|!a)||L(t,n)||(C[t+n*v]^=1);break;case 6:for(n=a=0;n<v;n++,a++)for(3==a&&(a=0),t=r=0;t<v;t++,r++)(t&n&1)+((r=3==r?0:r)&&r==a)&1||L(t,n)||(C[t+n*v]^=1);break;case 7:for(n=a=0;n<v;n++,a++)for(3==a&&(a=0),t=r=0;t<v;t++,r++)((r=3==r?0:r)&&r==a)+(t+n&1)&1||L(t,n)||(C[t+n*v]^=1)}}var p,g,v,y,w,I,b,E=[],S=[],C=[],k=[],x=[],_=[],N=function(e,t){var n;t<e&&(n=e,e=t,t=n),k[n=((n=(n=t)*t+t)>>1)+e]=1},B=function(e){for(;255<=e;)e=((e-=255)>>8)+(255&e);return e},L=function(e,t){var n;return t<e&&(n=e,e=t,t=n),n=t,k[n=((n+=t*t)>>1)+e]},A=function(e){for(var t=0,n=0;n<=e;n++)5<=x[n]&&(t+=pe.N1+x[n]-5);for(n=3;n<e-1;n+=2)x[n-2]==x[n+2]&&x[n+2]==x[n-1]&&x[n-1]==x[n+1]&&3*x[n-1]==x[n]&&(0==x[n-3]||e<n+3||3*x[n-3]>=4*x[n]||3*x[n+3]>=4*x[n])&&(t+=pe.N3);return t};t.genframe=function(e){var t,n,r,a,i,o,s,l=pe.eccblocks,c=pe.gexp,d=pe.glog,u=e.length;g=0;do{if(r=4*(p-1)+16*(++g-1),y=l[r++],w=l[r++],I=l[r++],b=l[r],u<=(r=I*(y+w)+w-3+(g<=9)))break}while(g<40);for(v=17+4*g,a=I+(I+b)*(y+w)+w,u=0;u<a;u++)S[u]=0;for(E=e.slice(0),u=0;u<v*v;u++)C[u]=0;for(u=0;u<(v*(v+1)+1)/2;u++)k[u]=0;for(u=0;u<3;u++){for(n=r=0,C[(n=2==u?v-7:n)+3+v*((r=1==u?v-7:r)+3)]=1,t=0;t<6;t++)C[n+t+v*r]=1,C[n+v*(r+t+1)]=1,C[n+6+v*(r+t)]=1,C[n+t+1+v*(r+6)]=1;for(t=1;t<5;t++)N(n+t,r+1),N(n+1,r+t+1),N(n+5,r+t),N(n+t+1,r+5);for(t=2;t<4;t++)C[n+t+v*(r+2)]=1,C[n+2+v*(r+t+1)]=1,C[n+4+v*(r+t)]=1,C[n+t+1+v*(r+4)]=1}if(1<g)for(u=pe.adelta[g],n=v-7;;){for(t=v-7;u-3<t&&(h(t,n),!(t<u));)t-=u;if(n<=u+9)break;h(6,n-=u),h(n,6)}for(C[8+v*(v-8)]=1,n=0;n<7;n++)N(7,n),N(v-8,n),N(7,n+v-7);for(t=0;t<8;t++)N(t,7),N(t+v-8,7),N(t,v-8);for(t=0;t<9;t++)N(t,8);for(t=0;t<8;t++)N(t+v-8,8),N(8,t);for(n=0;n<7;n++)N(8,n+v-7);for(t=0;t<v-14;t++)1&t?(N(8+t,6),N(6,8+t)):(C[8+t+6*v]=1,C[6+v*(8+t)]=1);if(6<g)for(u=pe.vpat[g-7],r=17,t=0;t<6;t++)for(n=0;n<3;n++,r--)1&(11<r?g>>r-12:u>>r)?(C[5-t+v*(2-n+v-11)]=1,C[2-n+v-11+v*(5-t)]=1):(N(5-t,2-n+v-11),N(2-n+v-11,5-t));for(n=0;n<v;n++)for(t=0;t<=n;t++)C[t+v*n]&&N(t,n);for(a=E.length,i=0;i<a;i++)S[i]=E.charCodeAt(i);if(E=S.slice(0),a>=(t=I*(y+w)+w)-2&&(a=t-2,9<g)&&a--,i=a,9<g){for(E[i+2]=0,E[i+3]=0;i--;)u=E[i],E[i+3]|=255&u<<4,E[i+2]=u>>4;E[2]|=255&a<<4,E[1]=a>>4,E[0]=64|a>>12}else{for(E[i+1]=0,E[i+2]=0;i--;)u=E[i],E[i+2]|=255&u<<4,E[i+1]=u>>4;E[1]|=255&a<<4,E[0]=64|a>>4}for(i=a+3-(g<10);i<t;)E[i++]=236,E[i++]=17;for(_[0]=1,i=0;i<b;i++){for(_[i+1]=1,o=i;0<o;o--)_[o]=_[o]?_[o-1]^c[B(d[_[o]]+i)]:_[o-1];_[0]=c[B(d[_[0]]+i)]}for(i=0;i<=b;i++)_[i]=d[_[i]];for(r=t,i=n=0;i<y;i++)f(n,I,r,b),n+=I,r+=b;for(i=0;i<w;i++)f(n,I+1,r,b),n+=I+1,r+=b;for(i=n=0;i<I;i++){for(o=0;o<y;o++)S[n++]=E[i+o*I];for(o=0;o<w;o++)S[n++]=E[y*I+i+o*(I+1)]}for(o=0;o<w;o++)S[n++]=E[y*I+i+o*(I+1)];for(i=0;i<b;i++)for(o=0;o<y+w;o++)S[n++]=E[t+i+o*b];for(E=S,t=n=v-1,r=a=1,s=(I+b)*(y+w)+w,i=0;i<s;i++)for(u=E[i],o=0;o<8;o++,u<<=1)for(128&u&&(C[t+v*n]=1);a?t--:(t++,r?0!=n?n--:(r=!r,6==(t-=2)&&(t--,n=9)):n!=v-1?n++:(r=!r,6==(t-=2)&&(t--,n-=8))),a=!a,L(t,n););for(E=C.slice(0),n=3e4,r=u=0;r<8&&(m(r),(t=(()=>{for(var e,t,n,r,a=0,i=0,o=0;o<v-1;o++)for(e=0;e<v-1;e++)(C[e+v*o]&&C[e+1+v*o]&&C[e+v*(o+1)]&&C[e+1+v*(o+1)]||!(C[e+v*o]||C[e+1+v*o]||C[e+v*(o+1)]||C[e+1+v*(o+1)]))&&(a+=pe.N2);for(o=0;o<v;o++){for(t=n=e=x[0]=0;e<v;e++)(r=C[e+v*o])==n?x[t]++:x[++t]=1,i+=(n=r)?1:-1;a+=A(t)}for(var s=0,l=(l=i=i<0?-i:i)+(l<<2)<<1;v*v<l;)l-=v*v,s++;for(a+=s*pe.N4,e=0;e<v;e++){for(t=n=o=x[0]=0;o<v;o++)(r=C[e+v*o])==n?x[t]++:x[++t]=1,n=r;a+=A(t)}return a})())<n&&(n=t,u=r),7!=u);r++)C=E.slice(0);for(u!=r&&m(u),n=pe.fmtword[u+(p-1<<3)],r=0;r<8;r++,n>>=1)1&n&&(C[v-1-r+8*v]=1,r<6?C[8+v*r]=1:C[8+v*(r+1)]=1);for(r=0;r<7;r++,n>>=1)1&n&&(C[8+v*(v-7+r)]=1,r?C[6-r+8*v]=1:C[7+8*v]=1);return C},t.init=function(){p=t.ecclevel;var e=t.genframe(t.url);t.toTable?t.tableWrite(e,v):t.canvasWrite(e,v)},t.init()}var Ii,bi=wi;for(Ii in bi)bi[Ii]&&(Oe[Ii]=!0);pe.prototype={canvasWrite:function(e,t){var n=this;if(n.qrc||(n.qrc=n.getContext(n.domElement),n.qrc)){var r=n.size,a=n.qrc,i=(a.lineWidth=1,r),o=(i/=t+10,i=Math.round(i-.5),4);n.noBorder?(a.canvas.width=a.canvas.height=i*t,o=0):a.canvas.width=a.canvas.height=r,a.clearRect(0,0,r,r),a.fillStyle=n.colorLight,a.fillRect(0,0,i*(t+8),i*(t+8)),a.fillStyle=n.colorDark;for(var s=0;s<t;s++)for(var l=0;l<t;l++)e[l*t+s]&&a.fillRect(i*(o+s),i*(o+l),i,i)}else n.toTable=!0,n.domElement=document.createElement("div"),n.tableWrite(e,t)},tableWrite:function(e,t){var n=this,r=Math.round(this.size/t-3.5)+"px",a=t+(n.noBorder?0:2*n.borderSize),i=n.borderSize,o="width:"+r+";height:"+r+";",s=n.colorLight,l=n.colorDark,c=document.createElement("table");c.style.cssText="border:0;border-collapse:collapse;";for(var d=document.createElement("tr"),u=document.createElement("td"),h=function(){return u.cloneNode()},f=function(){var e=h();return e.style.cssText=o+"background:"+s,e},m=0;m<t;m++){var p=d.cloneNode();c.appendChild(p);for(var g,v=0;v<t;v++)1===e[m*t+v]?(g=void 0,(g=h()).style.cssText=o+"background:"+l,p.appendChild(g)):(g=f(),p.appendChild(g));if(!n.noBorder){y=void 0;w=void 0;I=void 0;var y=p;for(var w=y.firstChild,I=0;I<i;I++)y.insertBefore(f(),w),y.appendChild(f())}}if(!n.noBorder)for(var b=c,E=b.firstChild,S=0;S<n.borderSize;S++){for(var C=d.cloneNode(),k=0;k<a;k++){var x=f();C.appendChild(x)}b.appendChild(C),b.insertBefore(C.cloneNode(!0),E)}n.domElement.innerHTML="",n.domElement.appendChild(c)},getContext:function(e){return e.getContext&&e.getContext("2d")?e.getContext("2d"):(console.log("Browser does not have 2d Canvas support"),!1)},toImage:function(e){if(this.qrc){var t,n=this.imageTypes[e];if(n)return(t=new Image).src=this.domElement.toDataURL(n),t;throw new Error(e+" is not a valid image type ")}}},pe.adelta=[0,11,15,19,23,27,31,16,18,20,22,24,26,28,20,22,24,24,26,28,28,22,24,24,26,26,28,28,24,24,26,26,26,28,28,24,26,26,26,28,28],pe.vpat=[3220,1468,2713,1235,3062,1890,2119,1549,2344,2936,1117,2583,1330,2470,1667,2249,2028,3780,481,4011,142,3098,831,3445,592,2517,1776,2234,1951,2827,1070,2660,1345,3177],pe.fmtword=[30660,29427,32170,30877,26159,25368,27713,26998,21522,20773,24188,23371,17913,16590,20375,19104,13663,12392,16177,14854,9396,8579,11994,11245,5769,5054,7399,6608,1890,597,3340,2107],pe.eccblocks=[1,0,19,7,1,0,16,10,1,0,13,13,1,0,9,17,1,0,34,10,1,0,28,16,1,0,22,22,1,0,16,28,1,0,55,15,1,0,44,26,2,0,17,18,2,0,13,22,1,0,80,20,2,0,32,18,2,0,24,26,4,0,9,16,1,0,108,26,2,0,43,24,2,2,15,18,2,2,11,22,2,0,68,18,4,0,27,16,4,0,19,24,4,0,15,28,2,0,78,20,4,0,31,18,2,4,14,18,4,1,13,26,2,0,97,24,2,2,38,22,4,2,18,22,4,2,14,26,2,0,116,30,3,2,36,22,4,4,16,20,4,4,12,24,2,2,68,18,4,1,43,26,6,2,19,24,6,2,15,28,4,0,81,20,1,4,50,30,4,4,22,28,3,8,12,24,2,2,92,24,6,2,36,22,4,6,20,26,7,4,14,28,4,0,107,26,8,1,37,22,8,4,20,24,12,4,11,22,3,1,115,30,4,5,40,24,11,5,16,20,11,5,12,24,5,1,87,22,5,5,41,24,5,7,24,30,11,7,12,24,5,1,98,24,7,3,45,28,15,2,19,24,3,13,15,30,1,5,107,28,10,1,46,28,1,15,22,28,2,17,14,28,5,1,120,30,9,4,43,26,17,1,22,28,2,19,14,28,3,4,113,28,3,11,44,26,17,4,21,26,9,16,13,26,3,5,107,28,3,13,41,26,15,5,24,30,15,10,15,28,4,4,116,28,17,0,42,26,17,6,22,28,19,6,16,30,2,7,111,28,17,0,46,28,7,16,24,30,34,0,13,24,4,5,121,30,4,14,47,28,11,14,24,30,16,14,15,30,6,4,117,30,6,14,45,28,11,16,24,30,30,2,16,30,8,4,106,26,8,13,47,28,7,22,24,30,22,13,15,30,10,2,114,28,19,4,46,28,28,6,22,28,33,4,16,30,8,4,122,30,22,3,45,28,8,26,23,30,12,28,15,30,3,10,117,30,3,23,45,28,4,31,24,30,11,31,15,30,7,7,116,30,21,7,45,28,1,37,23,30,19,26,15,30,5,10,115,30,19,10,47,28,15,25,24,30,23,25,15,30,13,3,115,30,2,29,46,28,42,1,24,30,23,28,15,30,17,0,115,30,10,23,46,28,10,35,24,30,19,35,15,30,17,1,115,30,14,21,46,28,29,19,24,30,11,46,15,30,13,6,115,30,14,23,46,28,44,7,24,30,59,1,16,30,12,7,121,30,12,26,47,28,39,14,24,30,22,41,15,30,6,14,121,30,6,34,47,28,46,10,24,30,2,64,15,30,17,4,122,30,29,14,46,28,49,10,24,30,24,46,15,30,4,18,122,30,13,32,46,28,48,14,24,30,42,32,15,30,20,4,117,30,40,7,47,28,43,22,24,30,10,67,15,30,19,6,118,30,18,31,47,28,34,34,24,30,20,61,15,30],pe.glog=[255,0,1,25,2,50,26,198,3,223,51,238,27,104,199,75,4,100,224,14,52,141,239,129,28,193,105,248,200,8,76,113,5,138,101,47,225,36,15,33,53,147,142,218,240,18,130,69,29,181,194,125,106,39,249,185,201,154,9,120,77,228,114,166,6,191,139,98,102,221,48,253,226,152,37,179,16,145,34,136,54,208,148,206,143,150,219,189,241,210,19,92,131,56,70,64,30,66,182,163,195,72,126,110,107,58,40,84,250,133,186,61,202,94,155,159,10,21,121,43,78,212,229,172,115,243,167,87,7,112,192,247,140,128,99,13,103,74,222,237,49,197,254,24,227,165,153,119,38,184,180,124,17,68,146,217,35,32,137,46,55,63,209,91,149,188,207,205,144,135,151,178,220,252,190,97,242,86,211,171,20,42,93,158,132,60,57,83,71,109,65,162,31,45,67,216,183,123,164,118,196,23,73,236,127,12,111,246,108,161,59,82,41,157,85,170,251,96,134,177,187,204,62,90,203,89,95,176,156,169,160,81,11,245,22,235,122,117,44,215,79,174,213,233,230,231,173,232,116,214,244,234,168,80,88,175],pe.gexp=[1,2,4,8,16,32,64,128,29,58,116,232,205,135,19,38,76,152,45,90,180,117,234,201,143,3,6,12,24,48,96,192,157,39,78,156,37,74,148,53,106,212,181,119,238,193,159,35,70,140,5,10,20,40,80,160,93,186,105,210,185,111,222,161,95,190,97,194,153,47,94,188,101,202,137,15,30,60,120,240,253,231,211,187,107,214,177,127,254,225,223,163,91,182,113,226,217,175,67,134,17,34,68,136,13,26,52,104,208,189,103,206,129,31,62,124,248,237,199,147,59,118,236,197,151,51,102,204,133,23,46,92,184,109,218,169,79,158,33,66,132,21,42,84,168,77,154,41,82,164,85,170,73,146,57,114,228,213,183,115,230,209,191,99,198,145,63,126,252,229,215,179,123,246,241,255,227,219,171,75,150,49,98,196,149,55,110,220,165,87,174,65,130,25,50,100,200,141,7,14,28,56,112,224,221,167,83,166,81,162,89,178,121,242,249,239,195,155,43,86,172,69,138,9,18,36,72,144,61,122,244,245,247,243,251,235,203,139,11,22,44,88,176,125,250,233,207,131,27,54,108,216,173,71,142,0],pe.N1=3,pe.N2=3,pe.N3=40,pe.N4=10;let H=pe;({log:Qa,olog:Ga}=j("qrdisplaymodule"));var ge,Ei,Si=null,Ci=function(){var e,t;Qa("qrdisplaymodule.initialize"),t=window.innerWidth,Qa(t=t<(e=window.innerHeight-100)?t:e),Si=new H({url:"",size:t,toTable:!1,ecclevel:3,noBorder:!0}),qrdisplayQr.appendChild(Si.domElement),qrdisplayBackground.addEventListener("click",ki)},ki=function(){Qa("qrClicked"),qrdisplayBackground.classList.remove("active")},xi=function(e){Qa("qrdisplaymodule.displayCode"),Qa(e),Si.url=e,qrdisplayContent.textContent=e,Si.init(),qrdisplayBackground.classList.add("active")};class Ie{constructor(t,e,n,r,a){this._legacyCanvasSize=Ie.DEFAULT_CANVAS_SIZE,this._preferredCamera="environment",this._maxScansPerSecond=25,this._lastScanTimestamp=-1,this._destroyed=this._flashOn=this._paused=this._active=!1,this.$video=t,this.$canvas=document.createElement("canvas"),n&&"object"==typeof n?this._onDecode=e:(n||r||a?console.warn("You're using a deprecated version of the QrScanner constructor which will be removed in the future"):console.warn("Note that the type of the scan result passed to onDecode will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),this._legacyOnDecode=e),this._onDecodeError=(e="object"==typeof n?n:{}).onDecodeError||("function"==typeof n?n:this._onDecodeError),this._calculateScanRegion=e.calculateScanRegion||("function"==typeof r?r:this._calculateScanRegion),this._preferredCamera=e.preferredCamera||a||this._preferredCamera,this._legacyCanvasSize="number"==typeof n?n:"number"==typeof r?r:this._legacyCanvasSize,this._maxScansPerSecond=e.maxScansPerSecond||this._maxScansPerSecond,this._onPlay=this._onPlay.bind(this),this._onLoadedMetaData=this._onLoadedMetaData.bind(this),this._onVisibilityChange=this._onVisibilityChange.bind(this),this._updateOverlay=this._updateOverlay.bind(this),t.disablePictureInPicture=!0,t.playsInline=!0;let i=!(t.muted=!0);if(t.hidden&&(t.hidden=!1,i=!0),document.body.contains(t)||(document.body.appendChild(t),i=!0),n=t.parentElement,e.highlightScanRegion||e.highlightCodeOutline){if(r=!!e.overlay,this.$overlay=e.overlay||document.createElement("div"),(a=this.$overlay.style).position="absolute",a.display="none",a.pointerEvents="none",this.$overlay.classList.add("scan-region-highlight"),!r&&e.highlightScanRegion){this.$overlay.innerHTML='<svg class="scan-region-highlight-svg" viewBox="0 0 238 238" preserveAspectRatio="none" style="position:absolute;width:100%;height:100%;left:0;top:0;fill:none;stroke:#e9b213;stroke-width:4;stroke-linecap:round;stroke-linejoin:round"><path d="M31 2H10a8 8 0 0 0-8 8v21M207 2h21a8 8 0 0 1 8 8v21m0 176v21a8 8 0 0 1-8 8h-21m-176 0H10a8 8 0 0 1-8-8v-21"/></svg>';try{this.$overlay.firstElementChild.animate({transform:["scale(.98)","scale(1.01)"]},{duration:400,iterations:1/0,direction:"alternate",easing:"ease-in-out"})}catch(t){}n.insertBefore(this.$overlay,this.$video.nextSibling)}e.highlightCodeOutline&&(this.$overlay.insertAdjacentHTML("beforeend",'<svg class="code-outline-highlight" preserveAspectRatio="none" style="display:none;width:100%;height:100%;fill:none;stroke:#e9b213;stroke-width:5;stroke-dasharray:25;stroke-linecap:round;stroke-linejoin:round"><polygon/></svg>'),this.$codeOutlineHighlight=this.$overlay.lastElementChild)}this._scanRegion=this._calculateScanRegion(t),requestAnimationFrame(()=>{var e=window.getComputedStyle(t);"none"===e.display&&(t.style.setProperty("display","block","important"),i=!0),"visible"!==e.visibility&&(t.style.setProperty("visibility","visible","important"),i=!0),i&&(console.warn("QrScanner has overwritten the video hiding style to avoid Safari stopping the playback."),t.style.opacity="0",t.style.width="0",t.style.height="0",this.$overlay&&this.$overlay.parentElement&&this.$overlay.parentElement.removeChild(this.$overlay),delete this.$overlay,delete this.$codeOutlineHighlight),this.$overlay&&this._updateOverlay()}),t.addEventListener("play",this._onPlay),t.addEventListener("loadedmetadata",this._onLoadedMetaData),document.addEventListener("visibilitychange",this._onVisibilityChange),window.addEventListener("resize",this._updateOverlay),this._qrEnginePromise=Ie.createQrEngine()}static set WORKER_PATH(e){console.warn("Setting QrScanner.WORKER_PATH is not required and not supported anymore. Have a look at the README for new setup instructions.")}static async hasCamera(){try{return!!(await Ie.listCameras(!1)).length}catch(e){return!1}}static async listCameras(e=!1){if(!navigator.mediaDevices)return[];let t,n=async()=>(await navigator.mediaDevices.enumerateDevices()).filter(e=>"videoinput"===e.kind);try{e&&(await n()).every(e=>!e.label)&&(t=await navigator.mediaDevices.getUserMedia({audio:!1,video:!0}))}catch(e){}try{return(await n()).map((e,t)=>({id:e.deviceId,label:e.label||(0===t?"Default Camera":"Camera "+(t+1))}))}finally{t&&(console.warn("Call listCameras after successfully starting a QR scanner to avoid creating a temporary video stream"),Ie._stopVideoStream(t))}}async hasFlash(){let e;try{if(this.$video.srcObject){if(!(this.$video.srcObject instanceof MediaStream))return!1;e=this.$video.srcObject}else e=(await this._getCameraStream()).stream;return"torch"in e.getVideoTracks()[0].getSettings()}catch(e){return!1}finally{e&&e!==this.$video.srcObject&&(console.warn("Call hasFlash after successfully starting the scanner to avoid creating a temporary video stream"),Ie._stopVideoStream(e))}}isFlashOn(){return this._flashOn}async toggleFlash(){this._flashOn?await this.turnFlashOff():await this.turnFlashOn()}async turnFlashOn(){if(!this._flashOn&&!this._destroyed&&(this._flashOn=!0,this._active)&&!this._paused)try{if(!await this.hasFlash())throw"No flash available";await this.$video.srcObject.getVideoTracks()[0].applyConstraints({advanced:[{torch:!0}]})}catch(e){throw this._flashOn=!1,e}}async turnFlashOff(){this._flashOn&&(this._flashOn=!1,await this._restartVideoStream())}destroy(){this.$video.removeEventListener("loadedmetadata",this._onLoadedMetaData),this.$video.removeEventListener("play",this._onPlay),document.removeEventListener("visibilitychange",this._onVisibilityChange),window.removeEventListener("resize",this._updateOverlay),this._destroyed=!0,this._flashOn=!1,this.stop(),Ie._postWorkerMessage(this._qrEnginePromise,"close")}async start(){if(this._destroyed)throw Error("The QR scanner can not be started as it had been destroyed.");if((!this._active||this._paused)&&("https:"!==window.location.protocol&&console.warn("The camera stream is only accessible if the page is transferred via https."),this._active=!0,!document.hidden))if(this._paused=!1,this.$video.srcObject)await this.$video.play();else try{var{stream:e,facingMode:t}=await this._getCameraStream();!this._active||this._paused?Ie._stopVideoStream(e):(this._setVideoMirror(t),this.$video.srcObject=e,await this.$video.play(),this._flashOn&&(this._flashOn=!1,this.turnFlashOn().catch(()=>{})))}catch(e){if(!this._paused)throw this._active=!1,e}}stop(){this.pause(),this._active=!1}async pause(e=!1){if(this._paused=!0,!this._active)return!0;this.$video.pause(),this.$overlay&&(this.$overlay.style.display="none");var t=()=>{this.$video.srcObject instanceof MediaStream&&(Ie._stopVideoStream(this.$video.srcObject),this.$video.srcObject=null)};return(e||(await new Promise(e=>setTimeout(e,300)),!!this._paused))&&(t(),!0)}async setCamera(e){e!==this._preferredCamera&&(this._preferredCamera=e,await this._restartVideoStream())}static async scanImage(n,r,a,c,i=!1,o=!1){let d,s=!1;r&&("scanRegion"in r||"qrEngine"in r||"canvas"in r||"disallowCanvasResizing"in r||"alsoTryWithoutScanRegion"in r||"returnDetailedScanResult"in r)?(d=r.scanRegion,a=r.qrEngine,c=r.canvas,i=r.disallowCanvasResizing||!1,o=r.alsoTryWithoutScanRegion||!1,s=!0):r||a||c||i||o?console.warn("You're using a deprecated api for scanImage which will be removed in the future."):console.warn("Note that the return type of scanImage will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),r=!!a;try{let e,l,t;if([a,e]=await Promise.all([a||Ie.createQrEngine(),Ie._loadImage(n)]),[c,l]=Ie._drawToCanvas(e,d,c,i),a instanceof Worker){let s=a;r||Ie._postWorkerMessageSync(s,"inversionMode","both"),t=await new Promise((t,n)=>{let r,a,i,o=-1;a=e=>{e.data.id===o&&(s.removeEventListener("message",a),s.removeEventListener("error",i),clearTimeout(r),null!==e.data.data?t({data:e.data.data,cornerPoints:Ie._convertPoints(e.data.cornerPoints,d)}):n(Ie.NO_QR_CODE_FOUND))},i=e=>{s.removeEventListener("message",a),s.removeEventListener("error",i),clearTimeout(r),n("Scanner error: "+(e?e.message||e:"Unknown Error"))},s.addEventListener("message",a),s.addEventListener("error",i),r=setTimeout(()=>i("timeout"),1e4);var e=l.getImageData(0,0,c.width,c.height);o=Ie._postWorkerMessageSync(s,"decode",e,[e.data.buffer])})}else t=await Promise.race([new Promise((e,t)=>window.setTimeout(()=>t("Scanner error: timeout"),1e4)),(async()=>{try{var[t]=await a.detect(c);if(t)return{data:t.rawValue,cornerPoints:Ie._convertPoints(t.cornerPoints,d)};throw Ie.NO_QR_CODE_FOUND}catch(e){if(t=e.message||e,/not implemented|service unavailable/.test(t))return Ie._disableBarcodeDetector=!0,Ie.scanImage(n,{scanRegion:d,canvas:c,disallowCanvasResizing:i,alsoTryWithoutScanRegion:o});throw"Scanner error: "+t}})()]);return s?t:t.data}catch(r){var e;if(d&&o)return e=await Ie.scanImage(n,{qrEngine:a,canvas:c,disallowCanvasResizing:i}),s?e:e.data;throw r}finally{r||Ie._postWorkerMessage(a,"close")}}setGrayscaleWeights(e,t,n,r=!0){Ie._postWorkerMessage(this._qrEnginePromise,"grayscaleWeights",{red:e,green:t,blue:n,useIntegerApproximation:r})}setInversionMode(e){Ie._postWorkerMessage(this._qrEnginePromise,"inversionMode",e)}static async createQrEngine(e){var t;return e&&console.warn("Specifying a worker path is not required and not supported anymore."),e=()=>U.e(175).then(U.bind(U,175)).then(e=>e.createWorker()),!(!Ie._disableBarcodeDetector&&"BarcodeDetector"in window&&BarcodeDetector.getSupportedFormats&&(await BarcodeDetector.getSupportedFormats()).includes("qr_code"))||(t=navigator.userAgentData)&&t.brands.some(({brand:e})=>/Chromium/i.test(e))&&/mac ?OS/i.test(t.platform)&&await t.getHighEntropyValues(["architecture","platformVersion"]).then(({architecture:e,platformVersion:t})=>/arm/i.test(e||"arm")&&13<=parseInt(t||"13")).catch(()=>!0)?e():new BarcodeDetector({formats:["qr_code"]})}_onPlay(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay(),this.$overlay&&(this.$overlay.style.display=""),this._scanFrame()}_onLoadedMetaData(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay()}_onVisibilityChange(){document.hidden?this.pause():this._active&&this.start()}_calculateScanRegion(e){var t=Math.round(2/3*Math.min(e.videoWidth,e.videoHeight));return{x:Math.round((e.videoWidth-t)/2),y:Math.round((e.videoHeight-t)/2),width:t,height:t,downScaledWidth:this._legacyCanvasSize,downScaledHeight:this._legacyCanvasSize}}_updateOverlay(){requestAnimationFrame(()=>{if(this.$overlay){var e=this.$video,t=e.videoWidth,n=e.videoHeight,r=e.offsetWidth,a=e.offsetHeight,i=e.offsetLeft,o=e.offsetTop,s=(m=window.getComputedStyle(e)).objectFit,l=t/n,c=r/a;switch(s){case"none":var d=t,u=n;break;case"fill":d=r,u=a;break;default:("cover"===s?c<l:l<c)?d=(u=a)*l:u=(d=r)/l,"scale-down"===s&&(d=Math.min(d,t),u=Math.min(u,n))}var[h,f]=m.objectPosition.split(" ").map((e,t)=>{var n=parseFloat(e);return e.endsWith("%")?(t?a-u:r-d)*n/100:n}),m=this._scanRegion.width||t,c=this._scanRegion.height||n,s=this._scanRegion.x||0,p=this._scanRegion.y||0;(l=this.$overlay.style).width=m/t*d+"px",l.height=c/n*u+"px",l.top=o+f+p/n*u+"px",n=/scaleX\(-1\)/.test(e.style.transform),l.left=i+(n?r-h-d:h)+(n?t-s-m:s)/t*d+"px",l.transform=e.style.transform}})}static _convertPoints(e,t){if(t){var n,r=t.x||0,a=t.y||0,i=t.width&&t.downScaledWidth?t.width/t.downScaledWidth:1;t=t.height&&t.downScaledHeight?t.height/t.downScaledHeight:1;for(n of e)n.x=n.x*i+r,n.y=n.y*t+a}return e}_scanFrame(){!this._active||this.$video.paused||this.$video.ended||("requestVideoFrameCallback"in this.$video?this.$video.requestVideoFrameCallback.bind(this.$video):requestAnimationFrame)(async()=>{if(!(this.$video.readyState<=1)){var t=Date.now()-this._lastScanTimestamp,n=1e3/this._maxScansPerSecond;t<n&&await new Promise(e=>setTimeout(e,n-t)),this._lastScanTimestamp=Date.now();try{var e=await Ie.scanImage(this.$video,{scanRegion:this._scanRegion,qrEngine:this._qrEnginePromise,canvas:this.$canvas})}catch(t){if(!this._active)return;this._onDecodeError(t)}!Ie._disableBarcodeDetector||await this._qrEnginePromise instanceof Worker||(this._qrEnginePromise=Ie.createQrEngine()),e?(this._onDecode?this._onDecode(e):this._legacyOnDecode&&this._legacyOnDecode(e.data),this.$codeOutlineHighlight&&(clearTimeout(this._codeOutlineHighlightRemovalTimeout),this._codeOutlineHighlightRemovalTimeout=void 0,this.$codeOutlineHighlight.setAttribute("viewBox",`${this._scanRegion.x||0} ${this._scanRegion.y||0} ${this._scanRegion.width||this.$video.videoWidth} `+(this._scanRegion.height||this.$video.videoHeight)),this.$codeOutlineHighlight.firstElementChild.setAttribute("points",e.cornerPoints.map(({x:e,y:t})=>e+","+t).join(" ")),this.$codeOutlineHighlight.style.display="")):this.$codeOutlineHighlight&&!this._codeOutlineHighlightRemovalTimeout&&(this._codeOutlineHighlightRemovalTimeout=setTimeout(()=>this.$codeOutlineHighlight.style.display="none",100))}this._scanFrame()})}_onDecodeError(e){e!==Ie.NO_QR_CODE_FOUND&&console.log(e)}async _getCameraStream(){if(navigator.mediaDevices){let t=/^(environment|user)$/.test(this._preferredCamera)?"facingMode":"deviceId",e=[{width:{min:1024}},{width:{min:768}},{}],n=e.map(e=>Object.assign({},e,{[t]:{exact:this._preferredCamera}}));for(var r of[...n,...e])try{var a=await navigator.mediaDevices.getUserMedia({video:r,audio:!1});return{stream:a,facingMode:this._getFacingMode(a)||(r.facingMode?this._preferredCamera:"environment"===this._preferredCamera?"user":"environment")}}catch(e){}}throw"Camera not found."}async _restartVideoStream(){var e=this._paused;await this.pause(!0)&&!e&&this._active&&await this.start()}static _stopVideoStream(e){for(var t of e.getTracks())t.stop(),e.removeTrack(t)}_setVideoMirror(e){this.$video.style.transform="scaleX("+("user"===e?-1:1)+")"}_getFacingMode(e){return(e=e.getVideoTracks()[0])?/rear|back|environment/i.test(e.label)?"environment":/front|user|face/i.test(e.label)?"user":null:null}static _drawToCanvas(e,t,n,r=!1){n=n||document.createElement("canvas");var a=t&&t.x?t.x:0,i=t&&t.y?t.y:0,o=t&&t.width?t.width:e.videoWidth||e.width,s=t&&t.height?t.height:e.videoHeight||e.height;return r||(r=t&&t.downScaledWidth?t.downScaledWidth:o,t=t&&t.downScaledHeight?t.downScaledHeight:s,n.width!==r&&(n.width=r),n.height!==t&&(n.height=t)),(t=n.getContext("2d",{alpha:!1})).imageSmoothingEnabled=!1,t.drawImage(e,a,i,o,s,0,0,n.width,n.height),[n,t]}static async _loadImage(e){if(e instanceof Image)return await Ie._awaitImageLoad(e),e;if(e instanceof HTMLVideoElement||e instanceof HTMLCanvasElement||e instanceof SVGImageElement||"OffscreenCanvas"in window&&e instanceof OffscreenCanvas||"ImageBitmap"in window&&e instanceof ImageBitmap)return e;if(!(e instanceof File||e instanceof Blob||e instanceof URL||"string"==typeof e))throw"Unsupported image type.";var t=new Image;t.src=e instanceof File||e instanceof Blob?URL.createObjectURL(e):e.toString();try{return await Ie._awaitImageLoad(t),t}finally{(e instanceof File||e instanceof Blob)&&URL.revokeObjectURL(t.src)}}static async _awaitImageLoad(a){a.complete&&0!==a.naturalWidth||await new Promise((t,n)=>{let r=e=>{a.removeEventListener("load",r),a.removeEventListener("error",r),e instanceof ErrorEvent?n("Image load error"):t()};a.addEventListener("load",r),a.addEventListener("error",r)})}static async _postWorkerMessage(e,t,n,r){return Ie._postWorkerMessageSync(await e,t,n,r)}static _postWorkerMessageSync(e,t,n,r){var a;return e instanceof Worker?(a=Ie._workerMessageId++,e.postMessage({id:a,type:t,data:n},r),a):-1}}Ie.DEFAULT_CANVAS_SIZE=400,Ie.NO_QR_CODE_FOUND="No QR code found",Ie._disableBarcodeDetector=!1,Ie._workerMessageId=0;let R=Ie;({log:ge,olog:Ei}=j("qrreadermodule"));var _i,Ni,Bi=null,ve=null,Li=!1,Ai=async function(){ge("qrreadermodule.initialize"),Li=await R.hasCamera(),ge(Li),Li&&(Bi=new R(qrreaderVideoElement,Ti,{maxScansPerSecond:5,highlightCodeOutline:!0}),qrreaderBackground.addEventListener("click",Di))},Ti=function(e){if(ge("dataRead"),null!=ve){if(e=e.data,ge(e.length),Ei(e),Ne.qrScanNoFilter)return Oi(e);try{return Ri(e)}catch(e){W(e.message)}}},Oi=function(e){ge("resolveRawData"),ve(e),ve=null,Bi.stop(),qrreaderBackground.classList.remove("active")},Ri=function(e){if(ge("extractHexCodeKey"),64===(e=66===e.length&&"0"===e[0]&&"x"===e[1]?Qt(e):e).length&&Zt(e))return Oi(e);throw new Error("Invalid Key!")},Di=function(){ge("readerClicked"),Bi.stop(),null!=ve&&ve(null),ve=null,qrreaderBackground.classList.remove("active")},Mi=function(){if(ge("qrreadermodule.read"),Li)return Bi.start(),qrreaderBackground.classList.add("active"),new Promise(function(e){return ve=e});W("We don't have a Camera!")},qi=({log:_i,olog:Ni}=j("usermodalmodule"),function(){_i("initialize"),Ra("initialize"),(he=new Za(deleteconfirmation)).connectDefaultElements(),Da=deleteconfirmation.getElementsByClassName("modal-content")[0]});let D={aliasmodule:Se,appcoremodule:Be,clientmanagermodule:xe,configmodule:Ne,contentmodule:Ce,debugmodule:Le,masterkeymodule:$,messageboxmodule:be,qrdisplaymodule:Ae,qrreadermodule:Te,servermodule:ke,statemodule:ot,uistatemodule:_e,usermodalmodule:Ue,utilsmodule:Ee};var Pi,ye=U(13);U.n(ye)().initialize(),U.g.allModules=D,Pi=Ft,(async()=>{var t,n,e=(()=>{var e=[];for(n in D)null!=(t=D[n]).initialize&&e.push(t.initialize());return e})();await Promise.all(e),Pi()})()}})()</script></body></html>